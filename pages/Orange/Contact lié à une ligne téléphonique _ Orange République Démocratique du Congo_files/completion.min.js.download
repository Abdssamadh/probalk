if(typeof orangesearch=="undefined"){orangesearch={}}if(typeof orangesearch.completion=="undefined"){orangesearch.completion={}}if(typeof orangesearch.completion.plugin=="undefined"){orangesearch.completion.plugin={}}var Component=function(a){Component.count+=1;this._abortSubmit=false;this._abortDisplay=false;this.additionalParams=null;this.applyDelayOnMouseOver=0;this.blocks=[];this.currentBlocks=[];this._cacheActivated=true;this._callbacks=[];this.changeOnMouseOver=false;this.checkInput=true;this.clearAccents=false;this.clearSeparatorChars=false;this.closeCompletionOnBlur=true;this._completionDiv=null;this._completionDivId=null;this._completionCloseLink=false;this._completionDivContainer=null;this.completionDivUnrollDelay=0;this.cssPrefix="";this._currentFieldValue="";this.debugMode=false;this._disableOnBlur=true;this._enabled=false;this.field=null;this._fieldForm=null;this._highlightedSuggestionIndex=0;this.isFormSubmit=true;this.maxNbChar=false;this.maxNbSuggestions=10;this.minQueryLength=1;this.nameOfInstanceForJsonP=false;this._uid=Component.count;this._oldInputFieldValue="";this.plugins=[];this._positionReference=null;this._properties={};this.queryParamName="kw";this._resultCache=null;this._serviceStatus="";this._selectedSuggestionIndex=0;this._started=false;this.submitCallback=null;this._suggestionsList=new orangesearch.completion.SuggestionList();this._suggestionPrefixId="completionResultLine_";this.useBoldInCompletion=true;this.url=null;this.onClickCompletion=false;this.onClickCompletionKeyword="basic";this.onClickCompletionId="0";this.onClickCompletionUrl=false;this._xhrManager=new wink.Xhr();this.isTargetBlank=true;if(a){this.setProperties(a)}return this};Component.count=0;Component.prototype={keyCode:{keyBad:0,keyOtherEnter:3,keyTab:9,keyEnter:13,keyShift:16,keyAlt:18,keyCapsLock:20,keyEscape:27,keyLeft:37,keyUp:38,keyRight:39,keyDown:40},setProperties:function(a){if(this._started){wink.log("The autocompleter is started, you can not set properties");return false}if(wink.isUndefined(a)||wink.isNull(a)){wink.log("You try to set invalid properties");return false}orangesearch.tools.mixin(this._properties,a);return true},start:function(){if(this._started){wink.log("Error : Completion already started");return false}if(!orangesearch.tools.checkEventCompatibility()){wink.log("Error : Completion need attachEvent or addEventListener navigator support");return false}if(!this._initProperties()){wink.log("Completion properties has not been set correctly");return false}this._initUrl();this._initDom();this._initPlugins();this._initPluginProperties();this._initSubscriptions();if(!this.enable()){return false}this._started=true;return true},disable:function(){if(!this._started||!this._enabled){wink.log("Error : Could not disable a non started or disabled completion");return false}this.hideCompletionDiv();this.disableCompletionDisplay();this.emptyCompletionResults();this._disableListeners();this._disableOnBlur=true;this._enabled=false;return true},enable:function(){if(this._enabled){wink.log("Error : Could not enable an already enabled completion");return false}this._enableListeners();this._disableOnBlur=false;this.enableCompletionDisplay();this._enabled=true;return true},isEnabled:function(){return this._enabled},restart:function(a){if(!a){return false}if(!this.disable()){return false}this._started=false;this._removeSubscriptions();this._removePlugins();this._removeDom();if(!this.setProperties(a)){return false}return this.start()},isStarted:function(){return this._started},_enableListeners:function(){this._initFormListener();this._initFieldListeners();this._initPluginFieldListeners();this._initOnBlurListener()},_disableListeners:function(){this._removeFormListener();this._removeFieldListeners();this._removePluginFieldListeners();this._removeOnBlurListener()},disableCompletionDisplay:function(){this._abortDisplay=true},enableCompletionDisplay:function(){this._abortDisplay=false},_initFieldListeners:function(){orangesearch.tools.addEventListener(this.field,"keydown",this.manageFieldOnKeyDown);orangesearch.tools.addEventListener(this.field,"keyup",this.manageFieldOnKeyUp);if(this.onClickCompletion){orangesearch.tools.addEventListener(this.field,"click",this.manageFieldOnClick)}},_removeFieldListeners:function(){orangesearch.tools.removeEventListener(this.field,"keydown",this.manageFieldOnKeyDown);orangesearch.tools.removeEventListener(this.field,"keyup",this.manageFieldOnKeyUp);orangesearch.tools.removeEventListener(this.field,"click",this.manageFieldOnClick)},_initPluginFieldListeners:function(){for(var a=0;a<this.plugins.length;a++){if(this.plugins[a].initFieldListeners){this.plugins[a].initFieldListeners();break}}},_removePluginFieldListeners:function(){for(var a=0;a<this.plugins.length;a++){if(this.plugins[a].removeFieldListeners){this.plugins[a].removeFieldListeners();break}}},_initOnBlurListener:function(){orangesearch.tools.addEventListener(document,"click",wink.bind(this.manageFieldOnBlur,this.field),false);orangesearch.tools.addEventListener(this._completionDiv,"click",function(a){a.stopPropagation()},false)},_removeOnBlurListener:function(){},_initFormListener:function(){if(this._fieldForm){this._submitListener=wink.bind(function(a){orangesearch.tools.stopEvent(a);if(this.manageFormOnSubmit(this,a)){this._fieldForm.submit()}},this);orangesearch.tools.addEventListener(this._fieldForm,"submit",this._submitListener)}},_removeFormListener:function(){if(this._fieldForm){orangesearch.tools.removeEventListener(this._fieldForm,"submit",this._submitListener);this._submitListener=false}},_initDom:function(){if(this._properties.divCompletion){orangesearch.tools.addClass(this._completionDiv,this.getCssPrefix());this._positionReference=null;this._completionDiv.style.visibility="hidden";this._completionDiv.style.display="none";return true}this._positionReference=document.createElement("div");this._positionReference.style.position="relative";this._positionReference.style.margin="0";this._positionReference.style.padding="0";this._positionReference.style.width="0";this._positionReference.style.height="0";this.field.parentNode.insertBefore(this._positionReference,this.field);this._completionDivContainer=document.createElement("div");this._completionDivContainer.style.position="absolute";this._completionDivContainer.style.margin="0";this._completionDivContainer.style.padding="0";this._completionDivContainer.style.border="0";this._completionDivContainer.style.top=this.field.offsetHeight+"px";this._positionReference.appendChild(this._completionDivContainer);this._completionDiv=document.createElement("div");if(this._completionDivId){this._completionDiv.setAttribute("id",this._completionDivId)}else{this._completionDiv.setAttribute("id","divCompletion_"+this._uid)}orangesearch.tools.addClass(this._completionDiv,this.getCssPrefix()+" box");this._completionDiv.style.position="relative";this._completionDiv.style.visibility="hidden";this._completionDiv.style.display="none";this._completionDivContainer.appendChild(this._completionDiv);return true},_removeDom:function(){if(this._positionReference){this._positionReference.parentNode.removeChild(this._positionReference)}},_initPlugins:function(){if(!this._properties.plugins){return false}var a=null;for(var b=0;b<this._properties.plugins.length;b++){if(!orangesearch.completion.plugin[this._properties.plugins[b]]){wink.log("The plugin "+this._properties.plugins[b]+" does not exists !");continue}a=new orangesearch.completion.plugin[this._properties.plugins[b]]();if(!a){wink.log("The plugin "+this._properties.plugins[b]+" does not exists !");continue}if(a.canBeUsed){if(!a.canBeUsed()){continue}}a.setCompletionComponent(this);if(a.initPlugin){a.initPlugin()}this.plugins.push(a)}return true},_removePlugins:function(){for(var a=0;a<this.plugins.length;a++){if(this.plugins[a].removePlugin){this.plugins[a].removePlugin()}}this.plugins=[]},_initSubscriptions:function(){for(var a=0;a<this.plugins.length;a++){if(this.plugins[a].initSubscription){this.plugins[a].initSubscription()}}},_removeSubscriptions:function(){for(var a=0;a<this.plugins.length;a++){if(this.plugins[a].removeSubscription){this.plugins[a].removeSubscription()}}},_initPluginProperties:function(){for(var a=0;a<this.plugins.length;a++){if(this.plugins[a].initProperties){this.plugins[a].initProperties()}}},setDebugMode:function(a){if(!wink.error){return false}if(a){this.debugMode=true;wink.error.logLevel=1}else{this.debugMode=false;wink.error.logLevel=0}},_initProperties:function(){if(!this._properties){wink.log("properties is missing");return false}if(wink.isUndefined(this._properties.url)||!this._properties.url){wink.log("property 'url' cannot be null");return false}this.url=this._properties.url;if(wink.isUndefined(this._properties.field)||!this._properties.field){wink.log("property 'field' cannot be null");return false}this.field=this._properties.field;if(this.field.form){this._fieldForm=this.field.form}this.field.autoCompleter=this;if(!wink.isUndefined(this._properties.onClickCompletion)){this.onClickCompletion=this._properties.onClickCompletion}if(!wink.isUndefined(this._properties.divCompletion)){if(typeof this._properties.divCompletion=="object"){this._completionDiv=this._properties.divCompletion}else{if(typeof this._properties.divCompletion=="string"){this._completionDiv=wink.byId(this._properties.divCompletion)}else{wink.log("property 'divCompletion' must be an HTMLElement or a string identifier");return false}}}if(!wink.isUndefined(this._properties.blocks)){if(this._properties.blocks.constructor!=Object&&this._properties.blocks.constructor!=Array){return false}if(typeof this._properties.blocks.length!="undefined"&&this._properties.blocks.length>0){this.blocks={"default":orangesearch.tools.clone(this._properties.blocks)}}else{if(this._properties.blocks.constructor==Object){if(!this._properties.blocks["default"]){return false}this.blocks=orangesearch.tools.clone(this._properties.blocks)}else{return false}}}if(this._properties.callbacks){this._callbacks=this._properties.callbacks}if(this._properties.nameOfInstanceForJsonP){this.nameOfInstanceForJsonP=this._properties.nameOfInstanceForJsonP}if(this._properties.onClickCompletionKeyword){this.onClickCompletionKeyword=this._properties.onClickCompletionKeyword}if(this._properties.onClickCompletionId){this.onClickCompletionId=this._properties.onClickCompletionId}if(this._properties.onClickCompletionUrl){this.onClickCompletionUrl=this._properties.onClickCompletionUrl}if(!wink.isUndefined(this._properties.checkInput)){this.checkInput=this._properties.checkInput}if(this._properties.divCompletionId){this._completionDivId=this._properties.divCompletionId}if(this._properties.completionDivUnrollDelay){this.completionDivUnrollDelay=this._properties.completionDivUnrollDelay}if(this._properties.applyDelayOnMouseOver){this.setDelayOnMouseOver(this._properties.applyDelayOnMouseOver)}if(!wink.isUndefined(this._properties.closeCompletionOnBlur)){this.closeCompletionOnBlur=this._properties.closeCompletionOnBlur}if(this._properties.disableCache){this._cacheActivated=false}if(this._properties.queryParamName){this.queryParamName=this._properties.queryParamName}if(this._properties.additionalParams){this.additionalParams=this._properties.additionalParams}if(this._properties.cssPrefix){this.cssPrefix=this._properties.cssPrefix}if(!wink.isUndefined(this._properties.maxNbChar)&&(this._properties.maxNbChar===false||wink.isInteger(this._properties.maxNbChar)>0)){this.maxNbChar=this._properties.maxNbChar}if(this._properties.maxNbSuggestions&&wink.isInteger(this._properties.maxNbSuggestions)>0){this.maxNbSuggestions=this._properties.maxNbSuggestions}if(this._properties.minQueryLength){this.minQueryLength=this._properties.minQueryLength}if(!wink.isUndefined(this._properties.clearAccents)){this.clearAccents=this._properties.clearAccents}if(!wink.isUndefined(this._properties.clearSeparatorChars)){this.clearSeparatorChars=this._properties.clearSeparatorChars}if(this._properties.closeLink){this._completionCloseLink=this._properties.closeLink}if(this._properties.isFormSubmit===false){this.isFormSubmit=false}if(this._properties.changeOnMouseOver){this.changeOnMouseOver=true}if(this._properties.useBoldInCompletion){this.useBoldInCompletion=true}if(wink.isUndefined(this._properties.isTargetBlank)){this.isTargetBlank=true}else{this.isTargetBlank=this._properties.isTargetBlank}this._resultCache=new Array();return true},_initOnClickCompletionUrl:function(){if(!this.onClickCompletionUrl){this.onClickCompletionUrl=this.url+"?id="+this.onClickCompletionId+"&"+this.queryParamName+"="+this.onClickCompletionKeyword}if(this.nameOfInstanceForJsonP){this.onClickCompletionUrl+="&jsonp="+this.nameOfInstanceForJsonP+".completionCallBack"}},_initUrl:function(){if(!this.blocks||this.blocks.length==0){this.blocks={"default":[{label:false,baseId:false,max:this.maxNbSuggestions}]}}if(this.onClickCompletion){this._initOnClickCompletionUrl()}var d=this.blocks["default"];var c=[];if(d.length===1){var b=d[0].baseId?d[0].baseId:false;if(b!==false){c.push("id="+b)}}else{var g=[];var a=[];for(var f=0,e=0;f<d.length;f++){if(!d[f].baseId){continue}g[e]=d[f].baseId;if(!d[f].max&&this.maxNbSuggestions){d[f].max=this.maxNbSuggestions}if(d[f].max){a[e]="an"+(e+1)+"="+d[f].max}e++}if(g.length>0){c.push("id="+g.join(","))}if(a.length>0){c.push(a.join("&"))}}if(this.maxNbSuggestions!==false){c.push("an="+this.maxNbSuggestions)}if(this.additionalParams){c.push(this.additionalParams)}if(this.nameOfInstanceForJsonP){c.push("jsonp="+this.nameOfInstanceForJsonP+".completionCallBack")}if(c.length>0){this.url+="?"+c.join("&")}return true},_unHighlightAllSuggestions:function(){if(this.getSizeOfSuggestionsList()<=0){return}for(var a=1;a<=this.getSizeOfSuggestionsList();a++){orangesearch.tools.removeClass(wink.byId(this.getSuggestionPrefix()+a),"highlighted")}},resetCompletion:function(){if(this.checkInput&&(this._currentFieldValue==""||this.getSizeOfSuggestionsList()==0)){this.hideCompletionDiv()}wink.publish("/callback/resetCompletion/reset",{uid:this._uid});this._unHighlightAllSuggestions();this._highlightedSuggestionIndex=0;this._selectedSuggestionIndex=0},manageDivOnMouseDown:function(c,b,a){c.field.value=c.getSuggestionParam(a.id,"v");c._currentFieldValue=c.field.value;c._selectedSuggestionIndex=c._highlightedSuggestionIndex;c.hideCompletionDiv();c.pushFieldCursor();if(c.field.form){c.callSubmit(b)}},manageDivOnMouseOver:function(d,c,b){if(d.applyDelayOnMouseOver){var a=d.getSuggestionParam(b.id,"index");d._highlightedSuggestionIndex=a;setTimeout(function(){d.checkDivOnMouseOverSuggestion(a,c,b)},d.applyDelayOnMouseOver)}else{d.highlightNewValueOnMouseOver(c,b)}},checkDivOnMouseOverSuggestion:function(a,c,b){if(this._highlightedSuggestionIndex==a&&document.activeElement==this.field){this.highlightNewValueOnMouseOver(c,b)}},highlightNewValueOnMouseOver:function(c,b){var a=this.getSuggestionParam(b.id,"index");if(!a){return}this._cursorUpDownPressed=false;this.highlightNewValue(a);if(this.changeOnMouseOver){this.field.value=this.getSuggestionParam(b.id,"v");this._selectedSuggestionIndex=this._highlightedSuggestionIndex}},highlightNewValueOnKeyDown:function(a){this.highlightNewValue(a);this._selectedSuggestionIndex=this._highlightedSuggestionIndex;if(this._highlightedSuggestionIndex>0){var b=this.getSuggestionParam(this._getSuggestionId(this._highlightedSuggestionIndex),"v");if(b){this.field.value=b}}},manageDivOnMouseOut:function(c,b,a){if(c.changeOnMouseOver){c.field.value=c._currentFieldValue}},_getSuggestionId:function(a){if(!a){return null}return this.getSuggestionPrefix()+a},getSuggestionNode:function(a){if(!a){return null}return wink.byId(this._getSuggestionId(a))},isSelectedSuggestion:function(){return(this._selectedSuggestionIndex>0)},callSubmit:function(a,b){if(this.manageFormOnSubmit(this,a,b)){this.field.form.submit()}},manageFormOnSubmit:function(f,e,g){f.hideCompletionDiv();orangesearch.tools.focusOnInputEnd(f.field);f._abortSubmit=false;wink.publish("/callback/manageFormOnSubmit/beforeSubmit",{uid:f._uid,autoCompleter:f,event:e,query:f.field.value});if(f._abortSubmit){f._abortSubmit=false;return false}var b=f._highlightedSuggestionIndex;if(!wink.isSet(g)||typeof g!="object"){g={}}g.id=f.field.id;g.div=f.getSuggestionNode(b);g.query=f.field.value;if(b>0){var d=f.getSuggestionParam(f._getSuggestionId(b),"v");var c=f.getSuggestionParam(f._getSuggestionId(b),"blockId");if(f.currentBlocks[c].submitCallback&&f._currentFieldValue==d){var a=wink.call(f.currentBlocks[c].submitCallback,g);if(a===false){return false}}}if(f._callbacks&&f._callbacks.submit&&wink.isCallback(f._callbacks.submit)){var a=wink.call(f._callbacks.submit,g);if(a===false){return false}}if(!f.isFormSubmit){return false}return true},manageFieldOnClick:function(a){if(this.value.length>0){return}if(!a&&window.event){a=window.event}if(!a){return false}return this.autoCompleter.defaultFieldOnClickCallBack(a)},defaultFieldOnClickCallBack:function(b){if(this.nameOfInstanceForJsonP){orangesearch.tools.writeScript(this.onClickCompletionUrl,"jsonCompletionCallBackScriptId")}else{var a={context:this,method:"completionCallBack"};var c={context:this,method:"completionFailureCallBack"};this._xhrManager.sendData(this.onClickCompletionUrl,null,"GET",a,c,null)}},manageFieldOnKeyUp:function(a){if(!a&&window.event){a=window.event}if(!a){return false}return this.autoCompleter.defaultFieldOnKeyUpCallBack(a)},defaultFieldOnKeyUpCallBack:function(e){switch(e.keyCode){case this.keyCode.keyAlt:case this.keyCode.keyCapsLock:case this.keyCode.keyTab:case this.keyCode.keyEnter:case this.keyCode.keyOtherEnter:case this.keyCode.keyShift:return;case this.keyCode.keyEscape:this.field.value=this._currentFieldValue;this.hideCompletionDiv();return;case this.keyCode.keyDown:case this.keyCode.keyUp:this._cursorUpDownPressed=true;this.pushFieldCursor();break;default:this._cursorUpDownPressed=false;this._currentFieldValue=this.field.value;break}this._currentFieldValue=orangesearch.tools.cleanQuery(this._currentFieldValue);if(this._oldInputFieldValue!=this._currentFieldValue){var g=encodeURIComponent(this._currentFieldValue);if(g!=""&&g.length>=this.minQueryLength&&typeof(g)!="undefined"){var d=this._currentFieldValue.substring(0,this._currentFieldValue.length-1);var f=this._resultCache.hasOwnProperty(d)?this._resultCache[d]:false;if(!f||f.length!=0){var b=this._resultCache.hasOwnProperty(this._currentFieldValue)?this._resultCache[this._currentFieldValue]:false;if(b){this._currentJsonResultsData=b;this.displayCompletionResults(this._currentFieldValue.toString)}else{var c=this.url+"&"+this.queryParamName+"="+g;if(this.nameOfInstanceForJsonP){orangesearch.tools.writeScript(c,"jsonCompletionCallBackScriptId")}else{var a={context:this,method:"completionCallBack"};var h={context:this,method:"completionFailureCallBack"};this._xhrManager.sendData(c,null,"GET",a,h,null)}this.field.focus()}}else{this.addCacheResult(this._currentFieldValue,new Array());this.hideCompletionDiv()}}else{this.hideCompletionDiv()}}this._oldInputFieldValue=this._currentFieldValue},manageFieldOnKeyDown:function(a){if(!a&&window.event){a=window.event}if(!a){return false}return this.autoCompleter.defaultFieldOnKeyDownCallBack(a)},defaultFieldOnKeyDownCallBack:function(a){switch(a.keyCode){case this.keyCode.keyDown:this.highlightNewValueOnKeyDown(this._highlightedSuggestionIndex+1);break;case this.keyCode.keyUp:this.highlightNewValueOnKeyDown(this._highlightedSuggestionIndex-1);break;case this.keyCode.keyEnter:case this.keyCode.keyOtherEnter:case this.keyCode.keyAlt:case this.keyCode.keyCapsLock:case this.keyCode.keyTab:case this.keyCode.keyBad:case this.keyCode.keyShift:break;default:this.resetCompletion();return}},manageFieldOnBlur:function(a){a=a||window.event;if(!this.autoCompleter){return}if(!this.autoCompleter.closeCompletionOnBlur){return}if(this.autoCompleter._disableOnBlur){return}if(a.target===this){return}if(!this.autoCompleter._cursorUpDownPressed){this.autoCompleter.hideCompletionDiv()}this.autoCompleter._cursorUpDownPressed=false},highlightNewValue:function(a){if(this.getSizeOfSuggestionsList()==0){return}this.showCompletionDiv();this._unHighlightAllSuggestions();if(a<0){a=this.getSizeOfSuggestionsList()}else{if(a>this.getSizeOfSuggestionsList()){a=0}}if(a==0){this.field.value=this._currentFieldValue;this._highlightedSuggestionIndex=0}else{this._highlightedSuggestionIndex=a;if(this._highlightedSuggestionIndex>0){orangesearch.tools.addClass(this.getSuggestionNode(this._highlightedSuggestionIndex),"highlighted");this._completionDiv.scrollTop=a*this.getSuggestionNode(this._highlightedSuggestionIndex).offsetHeight}}wink.publish("/callback/highlightNewValue/suggestionHighlighted",{uid:this._uid,div:this.getSuggestionNode(this._highlightedSuggestionIndex),index:this._highlightedSuggestionIndex})},completionCallBack:function(a){if(this._abortDisplay){return}var b=null;if(this.nameOfInstanceForJsonP){b=a}else{if(!a.xhrObject.responseText){return}b=wink.parseJSON(a.xhrObject.responseText)}if(!b.serviceStatus||wink.isUndefined(b.data)||wink.isUndefined(b.query)){return}switch(b.serviceStatus){case"SUSPENDED":case"KO_CONFIG":case"KO_PARSE":case"KO_MISC":case"LOCK":this.disable();return;break;case"NO_STATUS":case"TO":case"KO_HTTP":case"KO_CONNECT":this._currentJsonResultsData=this.getEmptyResultTemplate();break;default:this.addCacheResult(b.query,b.data);this._currentJsonResultsData=b.data;break}if(b.blocks){this.displayCompletionResults(b.query,b.blocks)}else{if(this._currentFieldValue==b.query){this.displayCompletionResults(b.query)}}},getEmptyResultTemplate:function(){var b=[];for(var a=0;a<this.blocks.length;a++){b.push([])}return b},completionFailureCallBack:function(){return},addCacheResult:function(b,a){if(!b){return}if(this._cacheActivated==true){this._resultCache[b]=a}},_getNewBlockLabel:function(c,b){var a=document.createElement("div");a.id="blockLabel"+b+"_"+this.getUid()+"_"+c;var e=this.currentBlocks[c]["type"];orangesearch.tools.addClass(a,"label block"+b);if(!e){this.populateNewBlockLabel(a,c,b);return a}for(var d=0;d<this.plugins.length;d++){if(this.plugins[d].isValidType(e)){this.plugins[d].populateNewBlockLabel(a,c,b);return a}}wink.log("Error: The plugin "+e+" has not been found in the list of loaded plugins !");return null},populateNewBlockLabel:function(b,d,a){var c="label";if(a=="Bottom"){c="bottomLabel"}if(this.currentBlocks[d].decoratorCallback&&wink.isCallback(this.currentBlocks[d].decoratorCallback)){var e={element:b,position:a};wink.call(this.currentBlocks[d].decoratorCallback,e);return}if(this.currentBlocks[d][c]){b.innerHTML=this.currentBlocks[d][c]}else{b=false}},_getNewSuggestionRow:function(c,b,a){var e=document.createElement("div");orangesearch.tools.addClass(e,"suggestion");e.id=this.getSuggestionPrefix()+a;var f=b.t;if(this.clearAccents){b.v=orangesearch.tools.stripAccents(b.v)}if(this.clearSeparatorChars){b.v=orangesearch.tools.stripSeparatorChars(b.v)}if(b.d&&b.d["params"]){this.addSuggestionParam(e.id,"params",b.d["params"])}for(var d=0;d<this.plugins.length;d++){if(this.plugins[d].isValidType(f)){orangesearch.tools.addClass(e,f);this.plugins[d].populateNewSuggestionRow(c,e,b,a);this.plugins[d].addEventListenerOnNewSuggestionRow(e);return e}}if(f){wink.log("Error: The plugin "+f+" has not been found in the list of loaded plugin !")}this.populateNewSuggestionRow(c,e,b,a);this.addEventListenerOnNewSuggestionRow(e);return e},populateNewSuggestionRow:function(e,g,b,a){var d=document.createElement("div");var f=document.createElement("span");var c=b.v;if(!wink.isString(c)){c=""}if(this.maxNbChar){c=c.cutString(this.maxNbChar)}f.appendChild(document.createTextNode(c));if(this.useBoldInCompletion){f=orangesearch.tools.getBoldInvNode(f,e,this.clearAccents,this.clearSeparatorChars)}if(this.debugMode&&b.d&&b.d["baseId"]){f.insertBefore(document.createTextNode("["+b.d["baseId"]+"] "),f.firstChild)}this.addSuggestionParam(g.id,"v",b.v);this.addSuggestionParam(g.id,"t",b.t);this.addSuggestionParam(g.id,"d",b.d);orangesearch.tools.addClass(f,"content");d.appendChild(f);g.appendChild(d)},addEventListenerOnNewSuggestionRow:function(b){var a=this;orangesearch.tools.addEventListener(b,"mousedown",function(c){a.manageDivOnMouseDown(a,c,this)});orangesearch.tools.addEventListener(b,"mouseover",function(c){a.manageDivOnMouseOver(a,c,this)});orangesearch.tools.addEventListener(b,"mouseout",function(c){a.manageDivOnMouseOut(a,c,this)})},_getBottomActionBar:function(){var c=document.createElement("div");orangesearch.tools.addClass(c,"footer actionBar");for(var e=0;e<this.plugins.length;e++){if(this.plugins[e].getBottomAction){var b=this.plugins[e].getBottomAction();if(b){b.style.display="inline-block";b.style.cssFloat="right";b.style.styleFloat="right";c.appendChild(b)}}}var d=this;var a=document.createElement("a");if(this._completionCloseLink===true){this._completionCloseLink="fermer"}a.innerHTML=this._completionCloseLink;a.style.display="inline-block";orangesearch.tools.addClass(a,"rightClose");orangesearch.tools.addEventListener(a,"click",function(f){d.hideCompletionDiv()});c.appendChild(a);return c},displayCompletionResults:function(e,d){this.currentBlocks=this.blocks["default"];if(typeof d!="undefined"&&d.length>0){if(this.blocks[d]){this.currentBlocks=this.blocks[d]}}wink.publish("/callback/displayCompletionResults/beforeDisplay",{uid:this._uid,query:e,block:this.currentBlocks});this.emptyCompletionResults();var c=this._currentJsonResultsData;if(this._checkNotEmptyList(c)){this.showCompletionDiv();var a=1;var b=0;var f=0;this._addNewSuggestionRowRecursive(e,f,c,b,a);this.showCompletionDiv()}else{this.hideCompletionDiv()}},_checkNotEmptyList:function(b){if(!b||b.length<=0){return false}if(this.checkInput&&!this.onClickCompletion){if(this.field.value==""){return false}}for(var a=0;a<b.length;a++){if(b[a].length>0){return true}}return false},_addNewSuggestionRowRecursive:function(g,h,f,d,a){if((d>=this.currentBlocks.length)||(this.maxNbSuggestions&&a>this.maxNbSuggestions)){return this._finalizeCompletionConstruction(a)}if((!f[d]||f[d].length===0)||(this.currentBlocks[d]["max"]&&h>=this.currentBlocks[d]["max"])){d++;h=0;return this._addNewSuggestionRowRecursive(g,h,f,d,a)}if(h==0){if((!wink.isUndefined(this.currentBlocks[d].label)&&this.currentBlocks[d].label!==false)||!wink.isUndefined(this.currentBlocks[d].decoratorCallback)){var c=this._getNewBlockLabel(d,"Top");if(c){this._completionDiv.appendChild(c)}}}var b=this._getNewSuggestionRow(g,f[d][h],a);if(!b){return}this.addSuggestionParam(b.id,"blockId",d);this.addSuggestionParam(b.id,"index",a);this._completionDiv.appendChild(b);if(this.completionDivUnrollDelay&&this.completionDivUnrollDelay>0){var e=this;setTimeout(function(){e._publishNewSuggestionRow(g,b,h,f,d,a)},this.completionDivUnrollDelay)}else{this._publishNewSuggestionRow(g,b,h,f,d,a)}},_publishNewSuggestionRow:function(f,c,g,e,d,a){wink.publish("/callback/displayCompletionResults/elementAdded",{uid:this._uid,position:a,div:c,data:e[d][g]});a++;g++;if(g>=e[d].length){if(!wink.isUndefined(this.currentBlocks[d].bottomLabel)||!wink.isUndefined(this.currentBlocks[d].decoratorCallback)){var b=this._getNewBlockLabel(d,"Bottom");if(b){this._completionDiv.appendChild(b)}}g=0;d++}this._addNewSuggestionRowRecursive(f,g,e,d,a)},_finalizeCompletionConstruction:function(a){if(this._completionCloseLink){this._completionDiv.appendChild(this._getBottomActionBar())}this.resetCompletion();wink.publish("/callback/displayCompletionResults/allElementsAdded",{uid:this._uid,position:a});return true},emptyCompletionResults:function(){if(!this._completionDiv){return}this.resetSuggestionsList();while(this._completionDiv.childNodes.length>0){this._completionDiv.removeChild(this._completionDiv.childNodes[0])}},showCompletionDiv:function(){if(!this._completionDiv){return}if(this._completionDiv.style.visibility=="visible"||this._completionDiv.style.display=="block"){return}if(this._callbacks&&this._callbacks.show&&wink.isCallback(this._callbacks.show)){wink.call(this._callbacks.show)}wink.publish("/callback/showCompletionDiv/show",{uid:this._uid});if(this._completionDiv){this._completionDiv.style.display="block";this._completionDiv.style.visibility="visible"}},hideCompletionDiv:function(){if(!this._completionDiv){return}if(this._completionDiv.style.visibility=="hidden"){return}if(this._callbacks&&this._callbacks.hide&&wink.isCallback(this._callbacks.hide)){wink.call(this._callbacks.hide)}wink.publish("/callback/hideCompletionDiv/hide",{uid:this._uid});if(this._completionDiv){this._completionDiv.style.display="none";this._completionDiv.style.visibility="hidden"}},pushFieldCursor:function(){if(this.field.value){oldValue=this.field.value;this.field.value="";this.field.value=oldValue}},enableCache:function(){this._cacheActivated=true},disableCache:function(){this._cacheActivated=false},getSuggestionPrefix:function(){return this._suggestionPrefixId+this._uid+"_"},getHighlightedSuggestionIndex:function(){return this._highlightedSuggestionIndex},getSelectedSuggestionIndex:function(){return this._selectedSuggestionIndex},getSelectedSuggestion:function(){return this.getAllSuggestionParams(this.getSuggestionPrefix()+this.getSelectedSuggestionIndex())},setDelayOnMouseOver:function(a){var b=orangesearch.tools.integerValue(a);if(!b||b<=0){this.applyDelayOnMouseOver=0}else{this.applyDelayOnMouseOver=b}},getDelayOnMouseOver:function(){if(this.applyDelayOnMouseOver){return this.applyDelayOnMouseOver}return 0},hasPositionReference:function(){if(this._positionReference){return true}return false},getPositionReference:function(){return this._positionReference},getCompletionDiv:function(){return this._completionDiv},getCssPrefix:function(){return this.cssPrefix},getUid:function(){return this._uid},abortSubmit:function(){this._abortSubmit=true},updateCurrentFieldValue:function(){this._currentFieldValue=this.field.value},updateSelectedIndex:function(){this._selectedSuggestionIndex=this._highlightedSuggestionIndex},hasForm:function(){if(this.field.form){return true}return false},setCheckInputValue:function(a){this.checkInput=a},addSuggestionParam:function(b,a,c){this._suggestionsList.addSuggestionParam(b,a,c)},getSuggestionParam:function(b,a){return this._suggestionsList.getSuggestionParam(b,a)},getAllSuggestionParams:function(a){return this._suggestionsList.getAllSuggestionParams(a)},getSizeOfSuggestionsList:function(){return this._suggestionsList.getSize()},getSuggestionsList:function(){return this._suggestionsList.getAllSuggestions()},resetSuggestionsList:function(){this._suggestionsList.resetAllParams()}};orangesearch.completion.Component=Component;var SuggestionList=function(){this._size=0;this._suggestions={}};SuggestionList.prototype={addSuggestionParam:function(b,a,c){if(!this._suggestions[b]){this._suggestions[b]={};this._size++}this._suggestions[b][a]=c},getSuggestionParam:function(b,a){if(!b){return null}if(!this._suggestions[b]||wink.isUndefined(this._suggestions[b][a])){return null}return this._suggestions[b][a]},getAllSuggestionParams:function(a){if(!a){return null}if(wink.isUndefined(this._suggestions[a])){return null}return this._suggestions[a]},resetAllParams:function(){this._size=0;this._suggestions={}},getSize:function(){return this._size},getAllSuggestions:function(){return this._suggestions}};orangesearch.completion.SuggestionList=SuggestionList;orangesearch.tools={eventHash:[],ieGetUniqueID:function(a){if(a===window){return"theWindow"}else{if(a===document){return"theDocument"}else{return a.uniqueID}}},arrayKeyExists:function(b,a){if(!a||(a.constructor!==Array&&a.constructor!==Object)){return false}return a[b]!==undefined},integerValue:function(b){var a=typeof(b);if(a==="number"){return b}else{if(a==="string"){return parseInt(b)}else{if(a==="boolean"){return(b)?1:0}else{return 0}}}},ucFirst:function(a){if(a.length>0){return a.charAt(0).toUpperCase()+a.substring(1)}else{return a}},lcFirst:function(a){if(a.length>0){return a.charAt(0).toLowerCase()+a.substring(1)}else{return a}},clone:function(c){var a=(c instanceof Array)?[]:{};for(var b in c){if(c[b]&&typeof c[b]=="object"){a[b]=orangesearch.tools.clone(c[b])}else{a[b]=c[b]}}return a},mixin:function(c,b){for(var a in b){if(a.substr(0,1)=="_"){continue}c[a]=b[a]}return c},stripAccents:function(f){f=f.replace("/\xC3\xA9/g","e");f=f.replace("/\xC3\xA8/g","e");f=f.replace("/\xC3\xAA/g","e");f=f.replace("/\xC3\xAB/g","e");f=f.replace("/\xC3\xA0/g","a");f=f.replace("/\xC3\xA2/g","a");f=f.replace("/\xC3\xA4/g","a");f=f.replace("/\xC3\xAC/g","i");f=f.replace("/\xC3\xAE/g","i");f=f.replace("/\xC3\xAF/g","i");f=f.replace("/\xC3\xB4/g","o");f=f.replace("/\xC3\xB6/g","o");f=f.replace("/\xC3\xB2/g","o");f=f.replace("/\xC3\xBB/g","u");f=f.replace("/\xC3\xBC/g","u");f=f.replace("/\xC3\xB9/g","u");f=f.replace("/\xC3\xA7/g","c");f=f.replace("/\xC3\xB1/g","n");f=f.replace("/\xC3\xBF/g","y");var d="\xE0\xE2\xE4\xE1\xC0\xC1\xC4\xC2\xEB\xE8\xE9\xEA\xCA\xC9\xC8\xCB\xEF\xEE\xED\xEC\xCC\xCD\xCE\xCF\xF2\xF3\xF4\xF6\xD2\xD3\xD4\xD6\xFC\xF9\xFB\xFA\xDA\xD9\xDB\xDC\xE3\xF5\xF1\xC3\xD5\xD1\xE7";var c="aaaaAAAAeeeeEEEEiiiiIIIIooooOOOOuuuuUUUUaonAONc";for(var e=0;e<d.length;e++){f=f.split(d.charAt(e)).join(c.charAt(e))}return f},stripSeparatorChars:function(a){return a.replace(/[-._']/g," ")},cleanQuery:function(a){return a.toLowerCase().replace(/[ ]+/g," ").replace(/^ /,"")},clearSpace:function(a){return a.toLowerCase().replace(/[ ]+/g," ").replace(/^ /,"").replace(/ $/,"")},focusOnInputEnd:function(c){c.focus();if(this.setSelectionRange){var a=c.value.length*2;this.setSelectionRange(a,a)}else{var b=c.value;c.value="";c.value=b}},writeScript:function(d,c){var e=document.getElementsByTagName("head")[0];var b=document.createElement("script");if(document.getElementById(c)){var a=document.getElementById(c);e.removeChild(a);b.setAttribute("id",c);b.setAttribute("type","text/javascript");b.setAttribute("src",d);e.appendChild(b)}else{b.setAttribute("id",c);b.setAttribute("type","text/javascript");b.setAttribute("src",d);e.appendChild(b)}},getBoldInvNode:function(d,j,h,e){var l=document.createElement(d.tagName);var b;var k=d.firstChild.nodeValue;if(wink.isUndefined(j)||j.length==0){b=document.createElement("b");b.appendChild(document.createTextNode(k));l.appendChild(b);return l}j=this.clearSpace(j);var g=this.stripAccents(this.stripSeparatorChars(j)).toLowerCase();var a=this.stripAccents(this.stripSeparatorChars(k)).toLowerCase();if(e&&h){k=this.stripAccents(this.stripSeparatorChars(k))}else{if(e){k=this.stripSeparatorChars(k)}else{if(h){k=this.stripAccents(k)}}}var c=0;var f=a.indexOf(g,c);while(f!=-1){if((f==0)||a.charAt(f-1)==" "){if(f>c){b=document.createElement("b");b.appendChild(document.createTextNode(k.substring(c,f)));l.appendChild(b)}var c=f+g.length;l.appendChild(document.createTextNode(k.substring(f,c)))}else{b=document.createElement("b");b.appendChild(document.createTextNode(k.substring(c,f+g.length)));l.appendChild(b);var c=f+g.length}var f=a.indexOf(g,c)}if(a.length>c){b=document.createElement("b");b.appendChild(document.createTextNode(k.substring(c)));l.appendChild(b)}return l},addClass:function(c,b){var a=c.className;if((" "+a+" ").indexOf(" "+b+" ")<0){c.className=a+(a?" ":"")+b}},removeClass:function(c,b){var a=wink.trim((" "+c.className+" ").replace(" "+b+" "," "));if(c.className!=a){c.className=a}},hasClass:function(b,a){return((" "+b.className+" ").indexOf(" "+a+" ")>=0)},fullDate:function(c){var d=new Array("janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre");var b=new Array("dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi");var a=new Date;if(typeof c!="undefined"&&c==true){return a.getDate()+" "+d[a.getMonth()]+" "+a.getFullYear()}return b[a.getDay()]+" "+a.getDate()+" "+d[a.getMonth()]+" "+a.getFullYear()},getNowDay:function(){var a=new Date();var b="";switch(a.getDay()){case 0:b="dimanche";break;case 1:b="lundi";break;case 2:b="mardi";break;case 3:b="mercredi";break;case 4:b="jeudi";break;case 5:b="vendredi";break;case 6:b="samedi";break}return b},getNowDate:function(){var a=new Date();str=a.getDate()+" ";switch(a.getMonth()){case 0:str+="janvier";break;case 1:str+="février";break;case 2:str+="mars";break;case 3:str+="avril";break;case 4:str+="mai";break;case 5:str+="juin";break;case 6:str+="juillet";break;case 7:str+="août";break;case 8:str+="septembre";break;case 9:str+="octobre";break;case 10:str+="novembre";break;case 11:str+="décembre";break}return str},getSimpleFavIconUrl:function(a){if(!a||a.length<=0){return false}if(a.substr(0,7)!="http://"||a.substr(0,8)!="https://"){a="//"+a}return a+"/favicon.ico"},stopEvent:function(a){a=a||window.event;if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;a.returnValue=false},simpleHash:function(d,a){var b,c=0;for(b=0;b<d.length;b++){c+=(d.charCodeAt(b)*(b+1))}return Math.abs(c)%a},addEventListener:function(d,c,g,a){if(typeof d=="undefined"||!d){return}if(typeof a=="undefined"){a=false}if(d.attachEvent){var f="{FNKEY::obj_"+orangesearch.tools.ieGetUniqueID(d)+"::evt_"+c+"::fn_"+orangesearch.tools.simpleHash(g.toString(),1000000)+"}";var b=orangesearch.tools.eventHash[f];if(b){return}var e=function(){g.call(d)};orangesearch.tools.eventHash[f]=e;return d.attachEvent("on"+c,e)}else{if(d.addEventListener){return d.addEventListener(c,g,a)}}},removeEventListener:function(d,c,f,a){if(typeof d=="undefined"||!d){return}if(typeof a=="undefined"){a=false}if(d.detachEvent){var e="{FNKEY::obj_"+orangesearch.tools.ieGetUniqueID(d)+"::evt_"+c+"::fn_"+orangesearch.tools.simpleHash(f.toString(),1000000)+"}";var b=orangesearch.tools.eventHash[e];if(!b){return}delete orangesearch.tools.eventHash[e];return d.detachEvent("on"+c,b)}else{if(d.removeEventListener){return d.removeEventListener(c,f,a)}}},checkEventCompatibility:function(){return(window.attachEvent||window.addEventListener)},setOpacity:function(c,b){var a=wink.byId(b);if(!a){return}a.style.opacity=(c/100);a.style.MozOpacity=(c/100);a.style.KhtmlOpacity=(c/100);a.style.filter="alpha(opacity="+c+")"}};if(!String.prototype.cutString){String.prototype.cutString=function(a){if(a>0&&this.length>a){return this.substring(0,a-3)+"..."}else{return this}}}var Plugin=function(){this.completionComponent=null;return this};Plugin._extendPluginChildren=[];Plugin.prototype={setCompletionComponent:function(a){this.completionComponent=a},getTypeOfSuggestion:function(){return null},populateNewBlockLabel:function(a,b){this.completionComponent.populateNewBlockLabel(a,b)},populateNewSuggestionRow:function(c,d,b,a){this.completionComponent.populateNewSuggestionRow(c,d,b,a)},addEventListenerOnNewSuggestionRow:function(a){this.completionComponent.addEventListenerOnNewSuggestionRow(a)},extendFromPlugin:function(b){if(Plugin._extendPluginChildren[b]){return true}for(var a in orangesearch.completion.plugin.Plugin.prototype){if("extendFromPlugin"==a){continue}if(!b.prototype[a]){b.prototype[a]=orangesearch.completion.plugin.Plugin.prototype[a]}}Plugin._extendPluginChildren[b]=true;return true}};orangesearch.completion.plugin.Plugin=Plugin;define=function(c,h,a){if(typeof wink=="undefined"){wink={}}var b=arguments,g=b.length,e,j=null;if(g==1){e=b[0]}else{if(g==2){e=b[1];if(typeof b[0]=="array"||b[0] instanceof Array){j=b[0]}}else{e=b[2];j=b[1]}}return e(wink)};define.amd={vendor:"winktoolkit.org"};define(function(){if(typeof wink=="undefined"){wink={}}return wink});define(["../../_kernel/js/kernel"],function(c){c.version="ow_1.4.0";c.api={};c.mm={};c.net={};c.plugins={};c.ui={form:{},layout:{},xy:{},xyz:{}};c.ux={};var f=Array.prototype.slice;var a=window;c.byId=function(g){if(c.isString(g)){return document.getElementById(g)}else{return g}};c.query=function(g,h){return new d(g,h)};var d=(function(){var h=function(j,n){if(c.isUndefined(h.prototype.initialized)){this.init()}var o;try{o=f.call((n||document).querySelectorAll(j))}catch(p){o=[]}var k=this.length=o.length;for(var m=0;m<k;m++){this[m]=o[m]}this.selector=j;return this};var g=h.prototype={init:function(){g.each(["pop","push","reverse","shift","sort","splice","unshift","slice","indexOf","lastIndexOf","forEach"],function(k,j){g[j]=[][j]});c.query.extend(c,["getPosition","getTopPosition","getLeftPosition"],true);c.query.extend(c.fx,["getTransformPosition","hasClass"],true);c.query.extend(c.fx,["translate","rotate","scale","addClass","removeClass","apply","applyTransition","applyTransformTransition","onTransitionEnd"],false);c.query.extend(c.ux.gesture,["listenTo","unlistenTo"],false);g.each(["start","move","end"],function(k,j){g[j]=function(){var n=this.size();if(n==0){return}var q,o=this.toArray(),m=this.splice.call(arguments,0),p=c.ux.touch;for(q=0;q<n;q++){p.addListener.apply(p,[o[q],j].concat(m))}}});g.initialized=true},extend:function(m,n,t,j){var q=j||g,k={};var p,o=n.length;for(var p=0;p<o;p++){var r=n[p],s=m?m[r]:null;if(c.isFunction(s)){k[r]={c:m,f:s,r:t}}}g.each(k,function(x,u){var v=u.f,l=u.c,w=u.r;q[x]=function(){var z=this.size();if(z==0){return}var C,A=this.toArray(),B=[],y=this.splice.call(arguments,0);for(C=0;C<z;C++){B.push(v.apply(l,[A[C]].concat(y)))}if(!w){return this}if(B.length==1){return B[0]}return B}})},size:function(){return this.length},toArray:function(){return f.call(this,0)},each:function(k,l){for(i in k){var j=k[i];l.call(j,i,j)}}};return h})();c.query.extend=d.prototype.extend;var e="en_EN";c.setLocale=function(g){e=g};c.translate=function(j,h){var g=j;var l=window.i18n||{};if(c.isSet(h)&&c.isSet(h.i18n)){l=h.i18n}var m=l[e];if(c.isUndefined(m)){m=l}var k=m[j];if(!c.isUndefined(k)){g=k}return g};c.isUndefined=function(g){return(g===undefined)};c.isNull=function(g){return(g===null)};c.isSet=function(g){return((!c.isUndefined(g))&&(!c.isNull(g)))};c.isCallback=function(g){return !!((g&&g.method)||c.isFunction(g))};c.isString=function(g){return(typeof g=="string"||g instanceof String)};c.isInteger=function(g){return(parseInt(g)===g)};c.isNumber=function(g){return(typeof g=="number"||g instanceof Number)};c.isArray=function(g){return(typeof g=="array"||g instanceof Array)};c.isBoolean=function(g){return(typeof g=="boolean"||g instanceof Boolean)};c.isFunction=function(g){return Object.prototype.toString.call(g)==="[object Function]"};c.trim=function(g){return g.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};c.bind=function(j,h){var g=f.call(arguments,2);return function(){var k=g.concat(f.call(arguments,0));return j.apply(h,k)}};c.call=function(m,k){if(c.isFunction(m)){return m.apply(a,c.isArray(k)?k:[k])}var j=a;var l=m.method;var h=[];if(c.isSet(m.context)){j=m.context}if(arguments.length==2){h=[k]}if(c.isSet(m.arguments)){var g=m.arguments;if(!c.isArray(g)){g=[m.arguments]}h=h.concat(g)}return j[l].apply(j,h)};c.connect=function(h,g,r){var o=c.isFunction(r);if(!o&&!c.isSet(r.context)){r.context=a}var q=h[g];if(c.isNull(q)||c.isUndefined(q.cbs)){var p=function(){var y=p.target,w=[].splice.call(arguments,0);var t=y&&y.apply(h,w);var x,v=p.cbs,u=v.length;for(x=0;x<u;x++){var s=v[x];if(c.isFunction(s)){c.call(s,w)}else{c.call({context:s.context,method:s.method,arguments:w.concat(s.arguments)})}}return t};p.target=q;p.cbs=[];q=h[g]=p}var m,n=q.cbs,k=n.length;for(m=0;m<k;m++){var j=n[m];if((o&&r==j)||(!o&&j.context==r.context&&j.method==r.method)){return}}n.push(r)};c.disconnect=function(h,g,q){var o=c.isFunction(q);if(!o&&!c.isSet(q.context)){q.context=a}var p=h[g];if(!c.isUndefined(p.cbs)){var m,n=p.cbs,k=n.length;for(m=0;m<k;m++){var j=n[m];if((o&&q==j)||(!o&&j.context==q.context&&j.method==q.method)){n.splice(m,1);break}}}};c.setTimeout=function(k,l,h){var g=f.call(arguments,3);var j=function(){k[l].apply(k,g)};return setTimeout(j,h)};c.setInterval=function(k,l,h){var g=f.call(arguments,3);var j=function(){k[l].apply(k,g)};return setInterval(j,h)};c.getPosition=function(k,h,j){var g={x:0,y:0};var l=k;while(l&&l!=h){g.x+=l.offsetLeft;g.y+=l.offsetTop;if(j){g.x+=c.fx.getTransformPosition(l).x;g.y+=c.fx.getTransformPosition(l).y}l=l.offsetParent}return g};c.getTopPosition=function(j,g,h){return(c.getPosition(j,g,h).y)};c.getLeftPosition=function(j,g,h){return(c.getPosition(j,g,h).x)};var b=100;c.getUId=function(){return(b+=1)};if(c.isUndefined(a._)){_=c.bind(c.translate,c)}if(c.isUndefined(a.$)){$=function(){return c.query.apply(c,arguments)}}if(c.isUndefined(a.$$)){$$=c.bind(c.query,c)}return c});define(["../../../_amd/core"],function(){return wink});define(["../../../_amd/core"],function(){wink.error={logLevel:0,log:function(a){if(this.logLevel==1){if(typeof console!="undefined"){console.log(a)}else{alert(a)}}}};wink.log=wink.bind(wink.error.log,wink.error);return wink.error});define(["../../../_amd/core"],function(){var windowJson=window.JSON;wink.json={parse:function(str){if(wink.has("json-parse")){return windowJson.parse(str)}else{var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;str=String(str);cx.lastIndex=0;if(cx.test(str)){str=str.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var JSON=eval("("+str+")")}return JSON}},concat:function(obj1,obj2){for(var key in obj2){obj1[key]=obj2[key]}return obj1}};wink.parseJSON=wink.bind(wink.json.parse,wink.json);wink.mixin=wink.bind(wink.json.concat,wink.json);return wink.json});define(["../../../_amd/core"],function(){var b=[];wink.topics={_getTopics:function(){return b}};wink.topics.subscribe=a;function a(f,h){if(!wink.isCallback(h)){return}var g=[f.toLowerCase(),h];b.push(g)}wink.topics.unsubscribe=e;function e(h,n){var m=h.toLowerCase(),g=wink.isFunction(n);var j,f=b.length;for(j=0;j<f;j++){var k=b[j];if(k[0]==m&&((g&&n==k[1])||(!g&&k[1].method==n.method&&k[1].context==n.context))){b.splice(j,1);break}}}wink.topics.publish=d;function d(f,g){c(f.toLowerCase(),g)}var c=function(g,j){var h,f=b.length;for(h=0;h<f;h++){var k=b[h];if(k&&k[0]==g){if(wink.isSet(k[1])){wink.call(k[1],j)}}}};wink.publish=d;wink.subscribe=a;wink.unsubscribe=e;return wink.topics});define(["../../../_amd/core"],function(){var ac,ab,aa,Z,Y,X,W,V,U,T,R,P,O,N,M,L,K,I,H,G,F,E,z,A,D,J,y;ac=ab=aa=Z=Y=X=W=V=z=A=D=J=false;U=T=R=P=O=N=M=L=K=I=0;var S=wink.isSet;var s=function(a,b){return RegExp(a).test(b)};var ad=function(a,b){return RegExp(a).exec(b)};var C=function(h,e,g){var b={v:0,r:0,u:0};var a=ad(e,h);if(S(a)&&a.length>1){var d=a[2];var f=ad("[^\\"+g+"0-9]",d);if(S(f)){d=d.slice(0,f.index)}var c=d.split(g);if(c.length>0){b.v=c[0]}if(c.length>1){b.r=c[1]}if(c.length>2){b.u=c[2]}if(c.length>3){b.u+="."+c[3]}}return b};H=navigator||{};G=H.userAgent;F=H.platform;E=H.appVersion;ac=s(" AppleWebKit/",G);A=s(/bada/gi,G);D=s(/Opera/gi,G);y=s(/Tizen/gi,G);if(S(F)){if(s(/iphone/i,F)){aa=true}if(s(/ipod/i,F)){Z=true}if(s(/ipad/i,F)){Y=true}if(s(/blackberry/i,F)){z=true}}if(S(E)){if(s(/android/i,E)){X=true}if(s(/safari/i,E)){W=true;var x=C(E,"( Version/)([^ ]+)",".");P=x.v;O=x.r;N=x.u}if(s(/MSIE/i,E)){J=true;var x=C(E,"( MSIE )([^ ]+)",".");P=x.v;O=x.r}}if(!W&&!ac){V=s(/mozilla/i,G)}ab=aa||Z||X||z||A||y||s(" Mobile/",G);if(ac){var x=C(G,"( AppleWebKit/)([^ ]+)",".");U=x.v;T=x.r;R=x.u}if(ab&&S(E)){var B=X?["( Android )([^ ]+)","."]:["( OS )([^ ]+)","_"];if(z){B=["( BlackBerry )([^ ]+)","."]}if(y){B=["( Tizen )([^ ]+)","."]}var Q=C(E,B[0],B[1]);L=Q.v;K=Q.r;I=Q.u}wink.ua={isWebkit:ac,isMobile:ab,isIPhone:aa,isIPod:Z,isIPad:Y,isIOS:(aa||Z||Y),isAndroid:X,isBlackBerry:z,isBada:A,isOpera:D,isSafari:W,isMozilla:V,isIE:J,isTizen:y,webkitVersion:U,webkitMinorVersion:T,webkitUpdateVersion:R,browserVersion:P,browserMinorVersion:O,browserUpdateVersion:N,osVersion:L,osMinorVersion:K,osUpdateVersion:I};return wink.ua});define(["../../../_amd/core"],function(){var e={},h={},j=wink.isFunction;wink.has=k;wink.has.prefixes=["-webkit-","-moz-","-o-","ms-","-khtml-"];wink.has.prefix=null;function k(m){if(j(e[m])){e[m]=e[m]()}return e[m]}wink.has.inquire=b;function b(o,p,n){if(wink.isBoolean(e[o])){return}var m=p;if(n&&j(p)){m=p()}e[o]=m}wink.has.inquireMap=a;function a(o,m){if(!o||o.length==0){return}for(var n in o){b(n,o[n],m)}}wink.has.setProp=f;function f(m,n){h[m]=n}wink.has.deferProp=l;function l(n,m){if(j(m)){f(n,m)}else{f(n,function(){wink.has(m)})}}wink.has.prop=c;function c(n){var m=h[n];if(j(m)){m();m=h[n];if(j(m)){m=n}}return m||n}wink.has.getFeatures=g;function g(){return e}wink.has.getProperties=d;function d(){return h}return wink.has});define(["../../../_amd/core"],function(){var b=wink.has,c=b.inquireMap,a=window;c({"json-parse":function(){var e,d=false;if(a.JSON&&typeof JSON.parse=="function"){e=JSON.parse('{"w":1}');d=!!(e&&e.w)}return d},"json-stringify":function(){var e,d=false;if(a.JSON&&typeof JSON.stringify=="function"){e=JSON.stringify({w:true});d=(e=='{"w":true}')}return d}});return b});define(["../../../_amd/core"],function(){var f=wink.has,b=f.inquireMap,l=f.setProp,p=f.deferProp,o=window,m=o.document,g=m.createElement("div"),c=g.style,j=f.prefixes,e="string",h={a:"transform-property",b:"transition-property",c:"transition-duration",d:"transition-delay",e:"transition-timing-function",f:"border-radius",g:"text-shadow",h:"box-shadow",i:"gradient",j:"perspective",k:"transform-origin",l:"transform-style",m:"transform",n:"css-transition",o:"css-perspective",p:"css-transform",q:"perspective-origin",r:"backface-visibility",s:"tap-highlight-color",t:"user-select",bg:"background-image",tr:"transition",an:"animation"};function n(q){var d=q;var s=/(-)([a-z])/;var r=q.match(s);while(r!=null){d=d.replace(s,RegExp["$2"].toUpperCase());r=d.match(s)}return d}function a(v){var q=false;if(typeof c[v]==e){l(v,v);q=true}else{var u=wink.has.prefix;var d=(u!=null)?[u]:j;var t,r=d.length;for(t=0;t<r;t++){var s=n(d[t]+v);if(typeof c[s]==e){wink.has.prefix=d[t];l(v,s);q=true;break}}}return q}p(h.a,h.p);p(h.m,h.p);p(h.b,h.n);p(h.c,h.n);p(h.d,h.n);p(h.e,h.n);p(h.f,"css-border-radius");p(h.g,"css-text-shadow");p(h.h,"css-box-shadow");p(h.i,"css-gradient");p(h.j,h.o);p(h.k,h.o);p(h.l,h.o);p(h.q,h.o);p(h.tr,h.n);p(h.an,"css-animation");function k(d){return function(){a(d)}}p(h.r,k(h.r));p(h.s,k(h.s));p(h.t,k(h.t));b({"css-transform":function(){var q=a(h.m);var r=wink.has.prefix;var d=h.m;if(r!=null){d=(r+d)}if(!q){l(h.a,h.m)}else{l(h.a,f.prop(h.m))}l(h.m,d);return q},"css-animation":function(){return a("animation-name")},"css-transition":function(){var d=true;d=d&&a(h.b);d=d&&a(h.c);d=d&&a(h.d);d=d&&a(h.e);d=d&&a(h.tr);return d},"css-animation":function(){return a(h.an)},"css-translate3d":function(){return f("css-matrix")},"css-border-radius":function(){return a(h.f)},"css-text-shadow":function(){return a(h.g)},"css-box-shadow":function(){return a(h.h)},"css-gradient":function(){var q=h.i,w=h.bg,u=q,y="(linear,left top,right bottom,from(#9f9),to(white));";var r=wink.has.prefix;var t=(r!=null)?["",r]:[""].concat(j);var x,v=t.length;for(x=0;x<v;x++){var d=(t[x]+u);var z=d+y;c.cssText=w+":"+z;if(c[w]&&c[w].indexOf(q)!=-1){l(q,d);return true}}return false},"css-perspective":function(){var r=a(h.j)&&a(h.k)&&a(h.l)&&a(h.q);r=r&&a(h.k+"-x")&&a(h.k+"-y")&&a(h.k+"-z");if(!r){return false}var t=wink.has.prefix||"";var q=m.createElement("style");q.textContent="@media ("+t+"transform-3d){#wink_has{height:2px}}";m.getElementsByTagName("head")[0].appendChild(q);g.id="wink_has";m.documentElement.appendChild(g);var d=(g.offsetHeight===2);q.parentNode.removeChild(q);g.parentNode.removeChild(g);return d},"css-matrix":function(){var s=o.WebKitCSSMatrix;if(typeof s=="undefined"){return false}var d=new s("matrix(1,0,0,1,6,7)");var r=(d.m41==6&&d.m42==7)&&(d.m41==d.e&&d.m42==d.f);if(r){var q=new s("matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,6,7,8,1)");r=r&&(d.m41==q.m41)&&(d.m42==q.m42)&&(q.m43==8)}return r},"css-matrix-stack-inversed":function(){var r=wink.ua;if(!f("css-matrix")||!r){return false}var q=r.isIOS?parseInt(""+r.osVersion+r.osMinorVersion+r.osUpdateVersion):500;var d=r.isAndroid?parseInt(""+r.osVersion+r.osMinorVersion+r.osUpdateVersion):300;return(q<421||d<300)},"css-position-fixed":function(){var s=wink.ua;if((s.isAndroid&&(s.osVersion==2)&&(s.osMinorVersion==1))||s.isBada){return false}if(s.isIOS){if(s.osVersion<5){return false}else{return true}}var q=document.body;if(document.createElement&&q&&q.appendChild&&q.removeChild){if(!g.getBoundingClientRect){return null}g.innerHTML="x";g.style.cssText="position:fixed;top:100px;";q.appendChild(g);var t=q.style.height,u=q.scrollTop;q.style.height="3000px";q.scrollTop=500;var d=g.getBoundingClientRect().top;q.style.height=t;var r=d===100;q.removeChild(g);q.scrollTop=u;return r}return false},"css-overflow-scrolling":function(){return a("overflow-scrolling")}});return f});define(["../../../_amd/core"],function(){var b=wink.has,a=b.inquireMap,e=b.setProp,k=b.deferProp,h=window,f=h.document,g=f.documentElement,j={ts:"touchstart",tm:"touchmove",te:"touchend",gs:"gesturestart",gc:"gesturechange",ge:"gestureend",tre:"transitionend",ae:"animationend"};function c(d){return(("on"+j[d]) in g)}k(j.ts,j.ts);k(j.tm,j.tm);k(j.te,j.te);k(j.tre,j.tre);k(j.ae,j.ae);a({touchstart:function(){var d=c("ts");e(j.ts,d?j.ts:"mousedown");return d},touchmove:function(){var d=c("tm");e(j.tm,d?j.tm:"mousemove");return d},touchend:function(){var d=c("te");e(j.te,d?j.te:"mouseup");return d},touch:function(){return b(j.ts)&&b(j.tm)&&b(j.te)},gesturestart:function(){return c("gs")},gesturechange:function(){return c("gc")},gestureend:function(){return c("ge")},gesture:function(){return b(j.gs)&&b(j.gc)&&b(j.ge)},transitionend:function(){if(b("css-transition")){var d=wink.has.prefix;var l=j.tre;if(d=="-webkit-"){l="webkitTransitionEnd"}else{if(d=="-o-"){l="oTransitionEnd"}}e(j.tre,l);return true}return false},hashchange:function(){return"onhashchange" in h},animationend:function(){if(b("css-animation")){var d=b.prefix;var l=j.ae;if(d=="-webkit-"){l="webkitAnimationEnd"}else{if(d=="-o-"){l="oAnimationEnd"}}e(j.ae,l);return true}return false}});return b});define(["../../../_amd/core"],function(){var f=wink.isSet;var d={u:undefined};wink.fx={};wink.fx.addClass=j;function j(y,x){var w=y.className;if((" "+w+" ").indexOf(" "+x+" ")<0){y.className=w+(w?" ":"")+x}}wink.fx.removeClass=k;function k(y,x){var w=wink.trim((" "+y.className+" ").replace(" "+x+" "," "));if(y.className!=w){y.className=w}}wink.fx.toggleClass=r;function r(x,w){if(f(w)){if(a(x,w)){k(x,w)}else{j(x,w)}}}wink.fx.hasClass=a;function a(x,w){return((" "+x.className+" ").indexOf(" "+w+" ")>=0)}wink.fx.apply=n;function n(z,x){var A,y=z.style;for(A in x){var w=wink.has.prop(A);y[w]=x[A]}}wink.fx.applyTransition=o;function o(y,z,A,w,x){n(y,{"transition-property":v(z),"transition-duration":A,"transition-delay":w,"transition-timing-function":x})}wink.fx.applyTransformTransition=l;function l(y,z,w,x){o(y,"transform",z,w,x)}wink.fx.onTransitionEnd=t;function t(z,y,w){if(wink.has("transitionend")){var x=wink.has.prop("transitionend");var A=function(B){if(w!==true){z.removeEventListener(x,A,false)}y(B)};z.addEventListener(x,A,false);return A}else{setTimeout(function(){y()},0)}}wink.fx.getTransformPosition=s;function s(B){var w={x:null,y:null};var z=q(B);if(!wink.has("css-matrix")){var A=new RegExp(/matrix/i);if(A.test(z)){var A=new RegExp("[, ()]+","g");var y=z.split(A);if(y.length>6&&y[0]=="matrix"){w.x=parseInt(y[5]);w.y=parseInt(y[6])}}}else{if(z=="none"){z=""}var x=new WebKitCSSMatrix(z);w.x=x.m41;w.y=x.m42}return w}wink.fx.applyTranslate=m;wink.fx.translate=m;function m(z,w,B,A){h(z,w,B,d.u,d.u,d.u,A)}wink.fx.applyScale=b;wink.fx.scale=b;function b(z,w,A){h(z,d.u,d.u,w,A,d.u,d.u)}wink.fx.applyRotate=p;wink.fx.rotate=p;function p(w,x){h(w,d.u,d.u,d.u,d.u,x,d.u)}wink.fx.getTransform=q;function q(w){return window.getComputedStyle(w)[wink.has.prop("transform-property")]}wink.fx.setTransform=c;function c(x,w){n(x,{"transform-property":w})}var h=function(y,D,C,G,F,H,I){var x=y._cssT||{};x=y._cssT={t:(f(D)||f(C))?{tx:D,ty:C}:x.t,s:(f(G)||f(F))?{sx:G,sy:F}:x.s,r:f(H)?{a:H}:x.r};var z=(x.t&&(f(x.t.tx)||f(x.t.ty))),A=(x.s&&(f(x.s.sx)||f(x.s.sy))),B=(x.r&&f(x.r.a)),I=I;if(!wink.has("css-translate3d")||(wink.ua.isAndroid&&(A||B))){I=true}var J=z?g(x.t.tx,x.t.ty,I):"",K=A?u(x.s.sx,x.s.sy):"",w=B?e(x.r.a):"",E=wink.trim(J+" "+K+" "+w);c(y,E)};var g=function(w,F,D){var z="";var C=w;if(!f(C)){C=0}var B=F;if(!f(B)){B=0}var A="0";var E=false;E=E||(wink.isString(C)&&(C.indexOf("%",0)!=-1));E=E||(wink.isString(B)&&(B.indexOf("%",0)!=-1));if(!E){C=Math.round(C)+"px";B=Math.round(B)+"px";A=Math.round(A)+"px"}if(D){z="translate("+C+", "+B+")"}else{z="translate3d("+C+", "+B+", "+A+")"}return z};var u=function(w,C){var z="";var B=w;if(!f(B)){B=1}var A=C;if(!f(A)){A=1}if(!wink.has("css-perspective")){z="scale("+B+", "+A+")"}else{z="scale3d("+B+", "+A+", 1)"}return z};var e=function(y){var x="";var w=y;if(!f(w)){w=0}x="rotate("+w+"deg)";return x};var v=function(A){var x=A;if(A.indexOf(",")==-1){x=wink.has.prop(A)}else{var z=A.split(",");var y,w=z.length;for(y=0;y<w;y++){z[y]=wink.has.prop(wink.trim(z[y]))}x=z.join(",")}return x};wink.addClass=j;wink.removeClass=k;wink.hasClass=a;wink.toggleClass=r;return wink.fx});define(["../../../_amd/core"],function(){wink.math={round:function(c,b){if(!wink.isSet(b)){b=0}var a=Math.pow(10,b);return Math.round(c*a)/a},modulo:function(a,c){var b=a%c;return b<0?b+c:b}};return wink.math});define(["../../../_amd/core"],function(){var b=wink.isSet;var a=wink.isArray;wink.net.Xhr=function(c){this.uId=wink.getUId();this.request={xhrObject:null,params:c};this._create()};wink.net.Xhr.prototype={sendData:function(m,n,g,f,j,d,o){var u=this.request,q=u.xhrObject,k=encodeURIComponent,g=g.toUpperCase(),s=null;if(b(n)&&!a(n)){return}if(b(o)){s=wink.setTimeout(this,"_abort",o,j)}if(q){var v=null;if(b(n)){var y,x=n.length;for(y=0;y<x;y++){var c=n[y];var A=c.name;var w=c.value;if(g=="GET"){if(y==0&&m.indexOf("?")==-1){m+="?"+k(A)+"="+k(w)}else{m+="&"+k(A)+"="+k(w)}}else{if(y==0){v=k(A)+"="+k(w)}else{v+="&"+k(A)+"="+k(w)}}}}try{q.open(g,m,true);q.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(b(d)){if(!a(d)){}else{var y,x=d.length;for(y=0;y<x;y++){var h=d[y];q.setRequestHeader(h.name,h.value)}}}q.send(v)}catch(z){return false}q.onreadystatechange=function(){var e=q.readyState;if(e!=4){return}clearTimeout(s);var l=q.status;if(!((l>=200&&l<400)||l==0)){if(b(j)){wink.call(j,u)}}else{if(b(f)){wink.call(f,u)}}}}else{return false}return true},_abort:function(c){this.request.xhrObject.onreadystatechange=null;this.request.xhrObject.abort();if(b(c)){wink.call(c,this.request)}},_create:function(){var c=window.XMLHttpRequest;if(c){var d;try{d=new c()}catch(f){d=false}this.request.xhrObject=d}else{}}};wink.Xhr=wink.net.Xhr;return wink.Xhr});define(["../../../../_amd/core"],function(a){a.ui.layout.Accordion=function(b){this.uId=a.getUId();this.openMultipleSections=false;this.autoScroll=true;this.titleHeight=false;this.chevronRotation=90;this._sectionsList=[];this._selectedSection=0;this._height=0;this._visibleContent=0;this._animated=false;this._domNode=null;a.mixin(this,b);if(this._validateProperties()===false){return}this._initDom()};a.ui.layout.Accordion.prototype={DURATION:500,addSection:function(d,b){var c=new a.ui.layout.Accordion.Section({title:d,content:b,position:this._sectionsList.length,accordion:this});this._sectionsList.push(c);this._domNode.appendChild(c.containerNode);this._updateHeight();return c.uId},deleteSection:function(e){var h=-1;var j=-1;var g=-1;var b=this._sectionsList.length;var d;for(var c=0;c<b;c++){if(h==1){this._sectionsList[c].position=c-1}if(this._sectionsList[c].uId==this._selectedSection){g=c}if(this._sectionsList[c].uId==e){h=1;j=c;this._domNode.removeChild(this._sectionsList[c].containerNode);if(this._sectionsList[c].uId==this._selectedSection){if(c>0){d=this._sectionsList[c-1].uId}else{d=this._sectionsList[0].uId}}}}if(j!=-1){this._sectionsList.splice(j,1)}this._updateHeight();this.selectSection(d)},selectSection:function(d){var b=this._sectionsList.length;this._visibleContent=0;for(var c=0;c<b;c++){if(this._sectionsList[c].uId==d){this._sectionsList[c].show(this._visibleContent);this._selectedSection=d;if(this._sectionsList[c].opened==true){this._visibleContent+=this._sectionsList[c].contentNode.scrollHeight}}else{this._sectionsList[c].hide(this._visibleContent);if(this.openMultipleSections&&this._sectionsList[c].opened==true){this._visibleContent+=this._sectionsList[c].contentNode.scrollHeight}}}if(!this._animated){a.fx.applyTransition(this._domNode,"height",this.DURATION+"ms","","ease-in-out");this._animated=true}this._updateHeight()},refreshContentHeight:function(){this.selectSection(this._selectedSection)},getDomNode:function(){return this._domNode},getSections:function(){return this._sectionsList},_updateHeight:function(){var d=0;var b=this._sectionsList.length;for(var c=0;c<b;c++){if(this._sectionsList[c].contentNode.offsetHeight!=0){d+=this._sectionsList[c].titleNode.offsetHeight}else{d+=this._sectionsList[c].TITLE_HEIGHT}}this._height=d+this._visibleContent;this._domNode.style.height=this._height+"px"},_selectSection:function(b){this.selectSection(b)},_initDom:function(){this._domNode=document.createElement("div");this._domNode.className="w_list w_border_top ac_accordion";a.fx.applyTransition(this._domNode,"height",this.DURATION+"ms","","ease-in-out")},_validateProperties:function(){return true}};a.ui.layout.Accordion.Section=function(b){this.uId=a.getUId();this.title=b.title;this.content=b.content;this.position=b.position;this.opened=false;this.DURATION=500;this.HIGHER_INDEX=999;this.TITLE_HEIGHT=b.accordion.titleHeight||44;this.titleNode=null;this.chevronNode=null;this.contentNode=null;this.containerNode=null;this._accordion=b.accordion;if(this._validateProperties()===false){return}this._initDom()};a.ui.layout.Accordion.Section.prototype={show:function(b){a.fx.translate(this.containerNode,0,b);a.fx.rotate(this.chevronNode,0);if(a.has("css-transition")&&this._accordion.autoScroll){a.fx.onTransitionEnd(this.contentNode,a.bind(this._scroll,this))}if(this.opened===false){a.fx.translate(this.contentNode,0,this.contentNode.scrollHeight);a.fx.rotate(this.chevronNode,this._accordion.chevronRotation);this.opened=true}else{a.fx.translate(this.contentNode,0,0);a.fx.rotate(this.chevronNode,0);this.opened=false}if(!a.has("css-transition")&&this._accordion.autoScroll){this._scroll()}},hide:function(b){a.fx.translate(this.containerNode,0,b);if(!this._accordion.openMultipleSections){this.opened=false;a.fx.translate(this.contentNode,0,0);a.fx.rotate(this.chevronNode,0)}},_scroll:function(){this._accordion._updateHeight();scrollTo(0,a.getTopPosition(this.titleNode,null,true))},_validateProperties:function(){return true},_initDom:function(){this.containerNode=document.createElement("div");this.containerNode.className="ac_section";this.containerNode.style.zIndex=this.HIGHER_INDEX-this.position;a.fx.translate(this.containerNode,0,0);if(a.has("css-transition")){a.fx.applyTransformTransition(this.containerNode,this.DURATION+"ms","","ease-in-out")}this.contentNode=document.createElement("div");this.contentNode.className="w_bloc w_box w_border ac_content";a.fx.translate(this.contentNode,0,0);if(a.has("css-transition")){a.fx.applyTransformTransition(this.contentNode,this.DURATION+"ms","","ease-in-out")}if(a.isString(this.content)){this.contentNode.innerHTML=this.content}else{this.contentNode.innerHTML="";this.contentNode.appendChild(this.content)}this.titleNode=document.createElement("div");a.fx.translate(this.titleNode,0,0);this.titleNode.innerHTML=this.title;this.titleNode.className="w_box w_list_item w_no_wrap w_border_bottom w_border_left w_border_right w_bg_light ac_title";this.titleNode.onclick=a.bind(function(){this._accordion._selectSection(this.uId);a.publish("/section/events/selectsection",{sectionId:this.uId,accordionId:this._accordion.uId})},this);this.chevronNode=document.createElement("div");this.chevronNode.className="w_icon w_chevron";a.fx.rotate(this.chevronNode,0);a.fx.applyTransformTransition(this.chevronNode,this.DURATION+"ms","","ease-in-out");this.titleNode.appendChild(this.chevronNode);this.containerNode.appendChild(this.titleNode);this.containerNode.appendChild(this.contentNode)}};return a.ui.layout.Accordion});var DirectLink=function(){orangesearch.completion.plugin.Plugin.call(this);new orangesearch.completion.plugin.Plugin().extendFromPlugin(orangesearch.completion.plugin.DirectLink);this.displayUrlAsTitle=false;this._currentLink="";this._textAppend="&nbsp;&nbsp;(acces direct)";this._directLinkClickHandler=function(a){if(this.completionComponent.isTargetBlank){window.open(a,"_blank")}else{window.location.href=a}};return this};DirectLink.prototype={getTypeOfSuggestion:function(){return"link"},isValidType:function(a){return(a==this.getTypeOfSuggestion())},initProperties:function(){if(this.completionComponent._properties.displayUrlAsTitle){this.displayUrlAsTitle=this.completionComponent._properties.displayUrlAsTitle}if(!wink.isUndefined(this.completionComponent._properties.directLinkTextAppend)){this._textAppend=this.completionComponent._properties.directLinkTextAppend}if(!wink.isUndefined(this.completionComponent._properties.directLinkClickHandler)){this._directLinkClickHandler=this.completionComponent._properties.directLinkClickHandler}},initSubscription:function(){wink.subscribe("/callback/manageFormOnSubmit/beforeSubmit",{context:this,method:"checkDirectLinks"})},removeSubscription:function(){wink.unsubscribe("/callback/manageFormOnSubmit/beforeSubmit",{context:this,method:"checkDirectLinks"})},populateNewSuggestionRow:function(e,f,c,a){if(this.displayUrlAsTitle&&c.d&&c.d["display_url"]){c.v=c.d["display_url"]}else{if(c.d&&c.d["title"]){c.v=c.d["title"]}}this.completionComponent.populateNewSuggestionRow(e,f,c,a);if(f.firstChild){var b=document.createElement("span");orangesearch.tools.addClass(b,"rightLabel");b.innerHTML=this._textAppend;f.insertBefore(b,f.firstChild)}if(c.d["url"]){this.completionComponent.addSuggestionParam(f.id,"url",c.d["url"]);var d=document.createElement("div");orangesearch.tools.addClass(d,"icon");f.insertBefore(d,f.firstChild)}f=this.createLinkContainerElement(f,c);orangesearch.tools.addEventListener(f,"mousedown",function(g){g.stopPropagation()})},createLinkContainerElement:function(d,a){var b=document.createElement("div");var c=document.createElement("a");c.setAttribute("href",a.d["url"]);if(this.completionComponent.isTargetBlank){c.setAttribute("target","_blank")}orangesearch.tools.addClass(c,"linkContainer");c.innerHTML=d.innerHTML;b.appendChild(c);d.innerHTML=b.innerHTML;return d},addEventListenerOnNewSuggestionRow:function(b){var a=this.completionComponent;orangesearch.tools.addEventListener(b,"mouseover",function(c){a.manageDivOnMouseOver(a,c,this)});orangesearch.tools.addEventListener(b,"mouseout",function(c){a.manageDivOnMouseOut(a,c,this)})},checkDirectLinks:function(c){if(c.uid!=this.completionComponent.getUid()){return false}var a=this.completionComponent._getSuggestionId(this.completionComponent._selectedSuggestionIndex);if(this.completionComponent.getSuggestionParam(a,"t")!==this.getTypeOfSuggestion()){return false}var b=this.completionComponent.getSuggestionParam(a,"url");if(!b){return false}this.completionComponent.resetCompletion();this.completionComponent.abortSubmit();this._directLinkClickHandler(b);return true}};orangesearch.completion.plugin.DirectLink=DirectLink;var Petale=function(){orangesearch.completion.plugin.Plugin.call(this);new orangesearch.completion.plugin.Plugin().extendFromPlugin(orangesearch.completion.plugin.Petale);this._identifierOfElement=[];this._idOfElement=[];this._petaleDdata=[];this._petaleThematics={boutique:"mboutique",people:"mpeople",shopping:"mshopping",meteo:"mmeteo"};this._smoothShow=false;this._smoothShowDelay=20;this._smoothShowIncrement=3;this._petaleInfoSize=50;this._petaleTitleSize=25;this._petaleDefaultImages={};this._borderBottomOfCompletionContainer=0;this._navigateInPetale=false;this._justExit=false;this._currentPetaleId=0;this._currentPetaleLinkId=0;this._petaleContainerIdentifier="petaleContainerId_";this._petaleSubContainerIdentifier="petaleSubContainerId_";this._petaleContainerCssClass="petaleBox";this._petaleContainerTitleCssClass="petaleBoxTitle";this._petaleSubContainerCssClass="petaleSubContainer";this._petaleReferenceContainerCssClass="petaleReferenceContainer";this._petaleReferenceContainerFullCssClass="petaleReferenceFullContainer";this._petaleSubReferenceContainerCssClass="petaleSubReferenceContainer";this._petaleSubReferenceContainerFullCssClass="petaleSubReferenceFullContainer";this._petaleReferenceImageTableCssClass="petaleReferenceImageTable";this._petaleReferenceImageTrCssClass="petaleReferenceImageTr";this._petaleReferenceImageTdCssClass="petaleReferenceImageTd";this._petaleReferenceImageContainerCssClass="petaleReferenceImageContainer";this._petaleReferenceImageCssClass="petaleReferenceImage";this._petaleReferenceInfoContainerCssClass="petaleReferenceInfoContainer";this._petaleReferenceInfoTopContainerCssClass="petaleReferenceInfoTopContainer";this._petaleReferenceInfoCssClass="petaleReferenceInfo";this._petaleReferenceUrlDisplayCssClass="petaleReferenceUrlDisplay";this._petaleReferenceUrlDisplayFaviconCssClass="petaleReferenceUrlDisplayFavicon";this._petaleActionLinkContainerCssClass="petaleActionLinkContainer";this._petaleActionLinkSeparatorCssClass="petaleActionLinkSeparator";this._petaleActionLinkCssClass="petaleActionLink";this._petaleActionUrlDisplayCssClass="petaleActionUrlDisplay";this._petaleActionUrlDisplayTextCssClass="petaleActionUrlDisplayText";this._petaleActionTextCssClass="petaleActionText";this._petaleGeneralActionOverCssClass="highlighted";this._petaleClickHandler=function(a){window.location.href=a};return this};Petale.prototype={canBeUsed:function(){return !("ontouchstart" in document.documentElement)},getTypeOfSuggestion:function(){return"petale"},isValidType:function(a){return(a==this.getTypeOfSuggestion())},populateNewSuggestionRow:function(e,c,b,a){if(b.d["links"]||b.d["ref"]){var d=document.createElement("div");orangesearch.tools.addClass(d,"chevron");c.appendChild(d)}this.completionComponent.populateNewSuggestionRow(e,c,b,a)},initProperties:function(){if(!wink.isUndefined(this.completionComponent._properties.petaleSmoothShow)){this._smoothShow=this.completionComponent._properties.petaleSmoothShow}if(!wink.isUndefined(this.completionComponent._properties.petaleSmoothShowDelay)&&wink.isInteger(this.completionComponent._properties.petaleSmoothShowDelay)){this._smoothShowDelay=this.completionComponent._properties.petaleSmoothShowDelay}if(!wink.isUndefined(this.completionComponent._properties.petaleSmoothShowIncrement)&&wink.isInteger(this.completionComponent._properties.petaleSmoothShowIncrement)){this._smoothShowIncrement=this.completionComponent._properties.petaleSmoothShowIncrement}if(!wink.isUndefined(this.completionComponent._properties.petaleBorderBottomOfContainer)&&wink.isInteger(this.completionComponent._properties.petaleBorderBottomOfContainer)){this._borderBottomOfCompletionContainer=this.completionComponent._properties.petaleBorderBottomOfContainer}if(!wink.isUndefined(this.completionComponent._properties.petaleImageWidthHeight)){this.petaleImageWidthHeight=this.completionComponent._properties.petaleImageWidthHeight}if(!wink.isUndefined(this.completionComponent._properties.petaleInfoSize)&&this.completionComponent._properties.petaleInfoSize>3){this._petaleInfoSize=this.completionComponent._properties.petaleInfoSize}if(!wink.isUndefined(this.completionComponent._properties.petaleTitleSize)&&this.completionComponent._properties.petaleTitleSize>3){this._petaleTitleSize=this.completionComponent._properties.petaleTitleSize}if(!wink.isUndefined(this.completionComponent._properties.petaleThematics)){this._petaleThematics=this.completionComponent._properties.petaleThematics}if(!wink.isUndefined(this.completionComponent._properties.petaleDefaultImages)){this._petaleDefaultImages=this.completionComponent._properties.petaleDefaultImages}if(!wink.isUndefined(this.completionComponent._properties.petaleClickHandler)){this._petaleClickHandler=this.completionComponent._properties.petaleClickHandler}},initPlugin:function(){var a=document.createElement("div");a.style.position="relative";a.style.width="0px";a.style.height="0px";a.style.margin="0px";a.style.padding="0px";a.style.zIndex="910";a.style.cssFloat="left";a.style.styleFloat="left";this._petaleDivObjectContainer=a;if(this.completionComponent.hasPositionReference()){this.completionComponent.getPositionReference().parentNode.insertBefore(a,this.completionComponent.getPositionReference())}else{this.completionComponent.getCompletionDiv().parentNode.insertBefore(a,this.completionComponent.getCompletionDiv())}},removePlugin:function(){if(this._petaleDivObjectContainer){if(this.completionComponent.hasPositionReference()){this.completionComponent.getPositionReference().parentNode.removeChild(this._petaleDivObjectContainer)}else{this.completionComponent.getCompletionDiv().parentNode.removeChild(this._petaleDivObjectContainer)}}},initSubscription:function(){wink.subscribe("/callback/highlightNewValue/suggestionHighlighted",{context:this,method:"highLightPetaleElement"});wink.subscribe("/callback/displayCompletionResults/elementAdded",{context:this,method:"_savePositionForPetaleSuggestion"});wink.subscribe("/callback/displayCompletionResults/allElementsAdded",{context:this,method:"_createAllPetaleElementsCall"});wink.subscribe("/callback/hideCompletionDiv/hide",{context:this,method:"hideAllPetaleElements"});wink.subscribe("/callback/resetCompletion/reset",{context:this,method:"hideAllPetaleElements"});wink.subscribe("/callback/displayCompletionResults/beforeDisplay",{context:this,method:"_resetPetaleData"})},removeSubscription:function(){wink.unsubscribe("/callback/highlightNewValue/suggestionHighlighted",{context:this,method:"highLightPetaleElement"});wink.unsubscribe("/callback/displayCompletionResults/elementAdded",{context:this,method:"_savePositionForPetaleSuggestion"});wink.unsubscribe("/callback/displayCompletionResults/allElementsAdded",{context:this,method:"_createAllPetaleElementsCall"});wink.unsubscribe("/callback/hideCompletionDiv/hide",{context:this,method:"hideAllPetaleElements"});wink.unsubscribe("/callback/resetCompletion/reset",{context:this,method:"hideAllPetaleElements"});wink.unsubscribe("/callback/displayCompletionResults/beforeDisplay",{context:this,method:"_resetPetaleData"})},initFieldListeners:function(){var a=this;orangesearch.tools.removeEventListener(this.completionComponent.field,"keydown",this.completionComponent.manageFieldOnKeyDown);this.onKeyDownFunctionHandler=function(b){a.manageFieldOnKeyDown(b)};orangesearch.tools.addEventListener(this.completionComponent.field,"keydown",this.onKeyDownFunctionHandler);orangesearch.tools.removeEventListener(this.completionComponent.field,"keyup",this.completionComponent.manageFieldOnKeyUp);this.onKeyUpFunctionHandler=function(b){a.manageFieldOnKeyUp(b)};orangesearch.tools.addEventListener(this.completionComponent.field,"keyup",this.onKeyUpFunctionHandler)},removeFieldListeners:function(){orangesearch.tools.removeEventListener(this.completionComponent.field,"keydown",this.onKeyDownFunctionHandler);orangesearch.tools.removeEventListener(this.completionComponent.field,"keyup",this.onKeyUpFunctionHandler)},manageFieldOnKeyUp:function(a){if(!a&&window.event){a=window.event}if(!a||!a.keyCode){return false}if(this._justExit||this._navigateInPetale){this._justExit=false;if(a.keyCode==this.completionComponent.keyCode.keyDown||a.keyCode==this.completionComponent.keyCode.keyUp||a.keyCode==this.completionComponent.keyCode.keyLeft||a.keyCode==this.completionComponent.keyCode.keyRight||a.keyCode==this.completionComponent.keyCode.keyEnter){return false}}return this.completionComponent.defaultFieldOnKeyUpCallBack(a)},manageFieldOnKeyDown:function(a){if(!a&&window.event){a=window.event}if(!a||!a.keyCode){return false}switch(a.keyCode){case this.completionComponent.keyCode.keyRight:if(this._enterInPetaleContainer(a)){return true}break;case this.completionComponent.keyCode.keyLeft:if(this._exitFromPetaleContainer(a)){return true}break;case this.completionComponent.keyCode.keyUp:if(this._upInPetaleContainer(a)){return true}break;case this.completionComponent.keyCode.keyDown:if(this._downInPetaleContainer(a)){return true}break;case this.completionComponent.keyCode.keyEnter:if(this._validateInPetaleContainer(a)){return true}break;default:break}return this.completionComponent.defaultFieldOnKeyDownCallBack(a)},_enterInPetaleContainer:function(e){if(this._navigateInPetale){return true}var b=this.completionComponent.getHighlightedSuggestionIndex();if(!b){return false}var d=wink.byId(this._petaleContainerIdentifier+this._currentPetaleId+"_"+b);if(!d){return false}var c=this.completionComponent.getSuggestionParam(this.completionComponent.getSuggestionPrefix()+b,"linkCount");if(!c){return false}var a=wink.byId("petaleActionLink_"+this._currentPetaleId+"_"+b+"_1");if(!a){return false}this._navigateInPetale=true;this._currentPetaleId=this.completionComponent.getUid()+"_"+b;this._currentPetaleLinkId=1;orangesearch.tools.addClass(a,this._petaleGeneralActionOverCssClass);return true},_exitFromPetaleContainer:function(c){if(!this._navigateInPetale){return false}if(!this._currentPetaleId||!this._currentPetaleLinkId){return false}var a=wink.byId("petaleActionLink_"+this._currentPetaleId+"_"+this._currentPetaleLinkId);if(!a){return false}orangesearch.tools.removeClass(a,this._petaleGeneralActionOverCssClass);this._currentPetaleId=0;this._currentPetaleLinkId=0;this._justExit=true;var b=this;setTimeout(function(){b._navigateInPetale=false;orangesearch.tools.focusOnInputEnd(b.completionComponent.field)},30);return true},_upInPetaleContainer:function(d){if(!this._navigateInPetale){return false}if(!this._currentPetaleId||!this._currentPetaleLinkId){return false}var c=this.completionComponent.getSuggestionParam(this.completionComponent.getSuggestionPrefix()+this._currentPetaleId,"linkCount");if(!c){return false}var b=this._currentPetaleLinkId-1;if(b<1){b=c}if(b==this._currentPetaleLinkId){return true}var a=wink.byId("petaleActionLink_"+this._currentPetaleId+"_"+this._currentPetaleLinkId);if(!a){return false}orangesearch.tools.removeClass(a,this._petaleGeneralActionOverCssClass);this._currentPetaleLinkId=b;a=wink.byId("petaleActionLink_"+this._currentPetaleId+"_"+this._currentPetaleLinkId);if(!a){return false}orangesearch.tools.addClass(a,this._petaleGeneralActionOverCssClass);return true},_downInPetaleContainer:function(d){if(!this._navigateInPetale){return false}if(!this._currentPetaleId||!this._currentPetaleLinkId){return false}var c=this.completionComponent.getSuggestionParam(this.completionComponent.getSuggestionPrefix()+this._currentPetaleId,"linkCount");if(!c){return false}var b=this._currentPetaleLinkId+1;if(b>c){b=1}if(b==this._currentPetaleLinkId){return true}var a=wink.byId("petaleActionLink_"+this._currentPetaleId+"_"+this._currentPetaleLinkId);if(!a){return false}orangesearch.tools.removeClass(a,this._petaleGeneralActionOverCssClass);this._currentPetaleLinkId=b;a=wink.byId("petaleActionLink_"+this._currentPetaleId+"_"+this._currentPetaleLinkId);if(!a){return false}orangesearch.tools.addClass(a,this._petaleGeneralActionOverCssClass);return true},_validateInPetaleContainer:function(b){if(!this._navigateInPetale){return false}if(!this._currentPetaleId||!this._currentPetaleLinkId){return false}this._justExit=true;var a=this.completionComponent.getSuggestionParam(this.completionComponent.getSuggestionPrefix()+this._currentPetaleId,"link_url_action_"+this._currentPetaleLinkId);if(a){orangesearch.tools.stopEvent(b);var c=this;setTimeout(function(){c._petaleClickHandler(a)},250)}return true},_getFormattedText:function(b,a){if(b.length>a){return b.substring(0,a-3)+"..."}return b},createOnePetaleElement:function(d,e){var b=this.completionComponent;var c=this;var a=this._petaleThematics.people;if(e.d["them"]){a=e.d["them"].toLowerCase()}switch(a){case this._petaleThematics.meteo:this._createMeteoPetaleElement(b,c,d,e);break;case this._petaleThematics.shopping:this._createShoppingPetaleElement(b,c,d,e);break;case this._petaleThematics.boutique:this._createBoutiquePetaleElement(b,c,d,e);break;case this._petaleThematics.people:default:this._createPeoplePetaleElement(b,c,d,e);break}},_createPetaleContainer:function(e,f,b){this.completionComponent.addSuggestionParam(this._idOfElement[e],"them",b);var c=document.createElement("div");orangesearch.tools.addClass(c,this._petaleContainerCssClass+" "+this.completionComponent.getCssPrefix()+" "+this._petaleContainerIdentifier+this._identifierOfElement[e]);c.id=this._petaleContainerIdentifier+this.completionComponent.getUid()+"_"+this._identifierOfElement[e];this._petaleDivObjectContainer.appendChild(c);var a=document.createElement("div");orangesearch.tools.addClass(a,this._petaleContainerTitleCssClass);if(f.d["title"]){a.innerHTML=this._getFormattedText(f.d["title"],this._petaleTitleSize);a.title=f.d["title"]}else{a.innerHTML="&nbsp;"}c.appendChild(a);var d=document.createElement("div");orangesearch.tools.addClass(d,this._petaleSubContainerCssClass);d.id=this._petaleSubContainerIdentifier+this._identifierOfElement[e];c.appendChild(d);return d},_createPetaleReferenceContainer:function(f,a,g,c){var d=this.completionComponent;var e=this;var b=document.createElement("div");if(a){orangesearch.tools.addClass(b,this._petaleReferenceContainerCssClass);orangesearch.tools.addClass(b,this._petaleReferenceContainerCssClass+"_"+c)}else{orangesearch.tools.addClass(b,this._petaleReferenceContainerFullCssClass);orangesearch.tools.addClass(b,this._petaleReferenceContainerFullCssClass+"_"+c)}if(g!==false){b.id="petaleActionLink_"+this._identifierOfElement[f]+"_1";orangesearch.tools.addEventListener(b,"mouseover",function(){orangesearch.tools.addClass(this,e._petaleGeneralActionOverCssClass)});orangesearch.tools.addEventListener(b,"mouseout",function(){orangesearch.tools.removeClass(this,e._petaleGeneralActionOverCssClass)});orangesearch.tools.addEventListener(b,"click",(function(h){return function(j){orangesearch.tools.removeClass(this,e._petaleGeneralActionOverCssClass);e._petaleClickHandler(h)}})(g));this.completionComponent.addSuggestionParam(this._idOfElement[f],"link_url_action_1",g)}return b},_createPetaleReferenceSubContainer:function(a,b){var c=document.createElement("div");if(a){orangesearch.tools.addClass(c,this._petaleSubReferenceContainerCssClass);orangesearch.tools.addClass(c,this._petaleSubReferenceContainerCssClass+"_"+b)}else{orangesearch.tools.addClass(c,this._petaleSubReferenceContainerFullCssClass);orangesearch.tools.addClass(c,this._petaleSubReferenceContainerFullCssClass+"_"+b)}return c},_createPetaleReferenceUrl:function(e,f,h,b){var d=document.createElement("div");orangesearch.tools.addClass(d,this._petaleReferenceUrlDisplayCssClass);orangesearch.tools.addClass(d,this._petaleReferenceUrlDisplayCssClass+"_"+b);if(h&&h.length>0){var a=f.d["ref"]["urlDisplay"];if(a){var g=document.createElement("img");orangesearch.tools.addClass(g,this._petaleReferenceUrlDisplayFaviconCssClass);g.src=orangesearch.tools.getSimpleFavIconUrl(a);orangesearch.tools.addEventListener(g,"error",function(){this.parentNode.removeChild(this)});d.appendChild(g)}}var c=document.createElement("span");c.innerHTML=f.d["ref"]["urlDisplay"];d.appendChild(c);return d},_createPetaleActionLinks:function(c,k,a,l){var j=this.completionComponent;var f=this;if(a!==false){this.completionComponent.addSuggestionParam(this._idOfElement[c],"linkCount",k.d["links"].length+1)}else{this.completionComponent.addSuggestionParam(this._idOfElement[c],"linkCount",k.d["links"].length)}var b=document.createElement("div");orangesearch.tools.addClass(b,this._petaleActionLinkContainerCssClass);orangesearch.tools.addClass(b,this._petaleActionLinkContainerCssClass+"_"+l);var p=1;if(a!==false){p++}for(var e=0;e<k.d["links"].length;e++){if(!k.d["links"][e]["act"]||!k.d["links"][e]["type"]||!k.d["links"][e]["url"]||!k.d["links"][e]["urlDisplay"]){continue}var h=document.createElement("div");orangesearch.tools.addClass(h,this._petaleActionLinkSeparatorCssClass);orangesearch.tools.addClass(h,this._petaleActionLinkSeparatorCssClass+"_"+l);b.appendChild(h);var n=document.createElement("div");n.id="petaleActionLink_"+this._identifierOfElement[c]+"_"+p;orangesearch.tools.addClass(n,this._petaleActionLinkCssClass);orangesearch.tools.addClass(n,this._petaleActionLinkCssClass+"_"+l);orangesearch.tools.addEventListener(n,"mouseover",function(){orangesearch.tools.addClass(this,f._petaleGeneralActionOverCssClass)});orangesearch.tools.addEventListener(n,"mouseout",function(){orangesearch.tools.removeClass(this,f._petaleGeneralActionOverCssClass)});var d=document.createElement("div");orangesearch.tools.addClass(d,k.d["links"][e]["type"]+"ActionClass");var m=k.d["links"][e]["url"];this.completionComponent.addSuggestionParam(this._idOfElement[c],"link_url_"+(e+1),m);orangesearch.tools.addEventListener(n,"click",(function(q){return function(){orangesearch.tools.removeClass(this,f._petaleGeneralActionOverCssClass);f._petaleClickHandler(q)}})(m));this.completionComponent.addSuggestionParam(this._idOfElement[c],"link_url_action_"+p,m);var o=document.createElement("span");o.innerHTML=k.d["links"][e]["act"];orangesearch.tools.addClass(o,this._petaleActionTextCssClass);d.appendChild(o);n.appendChild(d);var g=document.createElement("div");orangesearch.tools.addClass(g,this._petaleActionUrlDisplayCssClass);var o=document.createElement("span");o.innerHTML=k.d["links"][e]["urlDisplay"];orangesearch.tools.addClass(o,this._petaleActionUrlDisplayTextCssClass);g.appendChild(o);n.appendChild(g);b.appendChild(n);p++}return b},_createPetaleImage:function(c,h,f){var j=document.createElement("table");orangesearch.tools.addClass(j,this._petaleReferenceImageTableCssClass);orangesearch.tools.addClass(j,this._petaleReferenceImageTableCssClass+"_"+f);j.cellPadding=0;j.cellSpacing=0;var d=j.insertRow(-1);orangesearch.tools.addClass(d,this._petaleReferenceImageTrCssClass);orangesearch.tools.addClass(d,this._petaleReferenceImageTrCssClass+"_"+f);var g=d.insertCell(-1);orangesearch.tools.addClass(g,this._petaleReferenceImageTdCssClass);orangesearch.tools.addClass(g,this._petaleReferenceImageTdCssClass+"_"+f);var e=document.createElement("div");orangesearch.tools.addClass(e,this._petaleReferenceImageContainerCssClass);orangesearch.tools.addClass(e,this._petaleReferenceImageContainerCssClass+"_"+f);var b=false;if(c._petaleDefaultImages&&c._petaleDefaultImages["default"]){b=c._petaleDefaultImages["default"]}if(c._petaleDefaultImages&&c._petaleDefaultImages[f]){b=c._petaleDefaultImages[f]}var a=document.createElement("img");orangesearch.tools.addClass(a,this._petaleReferenceImageCssClass);if(typeof h=="string"&&h.length>0){a.src=h;orangesearch.tools.addClass(a,this._petaleReferenceImageCssClass+"_"+f)}else{if(b){a.src=b}orangesearch.tools.addClass(a,this._petaleReferenceImageCssClass+"_"+f+"_default")}orangesearch.tools.addEventListener(a,"error",function(){if(b){this.src=b}orangesearch.tools.removeClass(this,c.completionComponent.getCssPrefix()+c._petaleReferenceImageCssClass+"_"+f);orangesearch.tools.addClass(this,c.completionComponent.getCssPrefix()+c._petaleReferenceImageCssClass+"_"+f+"_default")});e.appendChild(a);g.appendChild(e);return j},_createPetaleInfos:function(d,f,g,c,h){var b=document.createElement("div");orangesearch.tools.addClass(b,this._petaleReferenceInfoContainerCssClass);orangesearch.tools.addClass(b,this._petaleReferenceInfoContainerCssClass+"_"+c);d.appendChild(b);var a=document.createElement("div");orangesearch.tools.addClass(a,this._petaleReferenceInfoTopContainerCssClass);orangesearch.tools.addClass(a,this._petaleReferenceInfoTopContainerCssClass+"_"+c);b.appendChild(a);this._createPetaleBasicInfos(g,a,c);if(g.d["ref"]["urlDisplay"]&&h){var e=this._createPetaleReferenceUrl(f,g,h,c);b.appendChild(e)}},_createPetaleBasicInfos:function(f,a,c){for(var b=0;b<f.d["ref"]["info"].length;b++){if(f.d["ref"]["info"][b].length==0){continue}var e=document.createElement("div");orangesearch.tools.addClass(e,this._petaleReferenceInfoCssClass+"_"+(b+1));switch(c){case"boutique":if(b==1){var d=Math.round(parseFloat(f.d["ref"]["info"][b])*2);if(d<0){d=0}else{if(d>10){d=10}}orangesearch.tools.addClass(e,this._petaleReferenceInfoCssClass+"_"+c+"_mark");e.style.backgroundPosition="left -"+(14*d)+"px";break}default:orangesearch.tools.addClass(e,this._petaleReferenceInfoCssClass+"_"+c+"_"+(b+1));e.innerHTML=this._getFormattedText(f.d["ref"]["info"][b],this._petaleInfoSize);break}a.appendChild(e)}},_finalizePetale:function(b,d,e,c){var a=this._identifierOfElement[d];orangesearch.tools.addEventListener(c.parentNode,"mouseover",function(){b._disableOnBlur=true;b._highlightedSuggestionIndex=a});orangesearch.tools.addEventListener(c.parentNode,"mouseout",function(){b._disableOnBlur=false});orangesearch.tools.addEventListener(c.parentNode,"click",function(){b.field.focus()});c.parentNode.style.position="absolute";c.parentNode.style.zIndex="950";c.parentNode.style.visibility="hidden"},_checkPetaleData:function(b,a){if(a){if(!b.d["ref"]||!b.d["links"]||b.d["links"].length==0){return false}}else{if(!b.d["ref"]){return false}}return true},_createPetaleWithAction:function(h,f,c,k,e){if(typeof e=="undefined"||typeof e.type=="undefined"||typeof e.centerImage=="undefined"){wink.log("Error: petale must have a type and centerImage value");return}if(!this._checkPetaleData(k,true)){wink.log("Error: people petale must have reference and at least one action link");return}var g=this._createPetaleContainer(c,k,e.type);var a=k.d["ref"]["url"];var j=this._createPetaleReferenceContainer(c,true,a,e.type);var d=this._createPetaleReferenceSubContainer(true,e.type);j.appendChild(d);g.appendChild(j);if(k.d["ref"]["image"]){d.appendChild(this._createPetaleImage(f,k.d["ref"]["image"],e.type,e.centerImage))}else{d.appendChild(this._createPetaleImage(f,false,e.type,e.centerImage))}if(k.d["ref"]["info"]){this._createPetaleInfos(d,c,k,e.type,a)}var b=this._createPetaleActionLinks(c,k,a,e.type);g.appendChild(b);this._finalizePetale(h,c,k,g)},_createPetaleBasic:function(g,e,b,j,d){if(typeof d=="undefined"||typeof d.type=="undefined"||typeof d.centerImage=="undefined"){wink.log("Error: petale must have a type and centerImage value");return}if(!this._checkPetaleData(j,false)){wink.log("Error: people petale must have reference and at least one action link");return}var f=this._createPetaleContainer(b,j,d.type);var a=j.d["ref"]["url"];var h=this._createPetaleReferenceContainer(b,false,a,d.type);var c=this._createPetaleReferenceSubContainer(false,d.type);h.appendChild(c);f.appendChild(h);if(j.d["ref"]["image"]){c.appendChild(this._createPetaleImage(e,j.d["ref"]["image"],d.type,d.centerImage))}else{c.appendChild(this._createPetaleImage(e,false,d.type,d.centerImage))}if(j.d["ref"]["info"]){this._createPetaleBasicInfos(j,c,d.type)}var l=document.createElement("div");l.style.clear="left";l.style.height="0px";c.appendChild(l);if(j.d["ref"]["urlDisplay"]){var k=this._createPetaleReferenceUrl(b,j,a,d.type);h.appendChild(k)}if(a!==false){this.completionComponent.addSuggestionParam(this._idOfElement[b],"linkCount",1)}this._finalizePetale(g,b,j,f)},_createPeoplePetaleElement:function(a,c,b,e){var d={type:"people",centerImage:false};this._createPetaleWithAction(a,c,b,e,d)},_createBoutiquePetaleElement:function(a,c,b,e){var d={type:"boutique",centerImage:true};this._createPetaleWithAction(a,c,b,e,d)},_createShoppingPetaleElement:function(a,c,b,e){var d={type:"shopping",centerImage:false};this._createPetaleBasic(a,c,b,e,d)},_createMeteoPetaleElement:function(a,c,b,e){var d={type:"meteo",centerImage:false};this._createPetaleBasic(a,c,b,e,d)},hideAllPetaleElements:function(c){if(!c.uid||c.uid!=this.completionComponent.getUid()){return}if(this._petaleDivObjectContainer){this._currentPetaleId=0;this._currentPetaleLinkId=0;this._navigateInPetale=false;var a=this._petaleDivObjectContainer.children;if(a.length>0){for(var b=0;b<a.length;b++){a[b].style.visibility="hidden"}}}return true},_destroyAllPetaleElements:function(){if(this._petaleDivObjectContainer){this._petaleDivObjectContainer.innerHTML=""}},_resetPetaleData:function(a){if(!a.uid||a.uid!=this.completionComponent.getUid()){return}this._identifierOfElement=[];this._idOfElement=[];this._petaleDdata=[]},highLightPetaleElement:function(b){if(!b.uid||b.uid!=this.completionComponent.getUid()){return}if(!wink.isInteger(b.index)){return}var a=b.index;var c=wink.byId(this._petaleContainerIdentifier+this.completionComponent.getUid()+"_"+a);if(!c){this.hideAllPetaleElements(b);return}if(c.style.visibility=="visible"){return}this.hideAllPetaleElements(b);if(this._smoothShow){orangesearch.tools.setOpacity(0,this._petaleContainerIdentifier+this.completionComponent.getUid()+"_"+a)}c.style.visibility="visible";if(this._smoothShow){this._upOpacityRecursive(this._smoothShowIncrement,100,this._petaleContainerIdentifier+this.completionComponent.getUid()+"_"+a,this._smoothShowDelay)}},_savePositionForPetaleSuggestion:function(d){if(!d.uid||d.uid!=this.completionComponent.getUid()){return}var a=d.position;var c=d.div;var b=d.data;if(!b.t||!this.isValidType(b.t)){return}this._identifierOfElement[a]=a;this._idOfElement[a]=c.id;this._petaleDdata[a]=b},_createAllPetaleElementsCall:function(a){if(!a.uid||a.uid!=this.completionComponent.getUid()){return}var b=this;setTimeout(function(){b._createAllPetaleElements(a)},1)},_createAllPetaleElements:function(c){this._destroyAllPetaleElements();var d=c.position;for(var b=1;b<d;b++){var a=this._petaleDdata[b];if(!a){continue}this.createOnePetaleElement(b,a)}wink.publish("/callback/createAllPetaleElements/allPetaleElementsAdded")},_upOpacityRecursive:function(a,h,e,g){var d=wink.byId(e);if(!d){return}if(d.style.visibility=="hidden"){d.style.opacity=1;d.style.MozOpacity=1;d.style.KhtmlOpacity=1;d.style.filter="alpha(opacity="+100+")";return}var c=true;var b=d.style.opacity*100;b+=a;if(b>h){b=h;c=false}d.style.opacity=(b/100);d.style.MozOpacity=(b/100);d.style.KhtmlOpacity=(b/100);d.style.filter="alpha(opacity="+b+")";if(c==true){var f=this;setTimeout(function(){f._upOpacityRecursive(a,h,e,g)},g)}}};orangesearch.completion.plugin.Petale=Petale;var PetaleMobile=function(){orangesearch.completion.plugin.Plugin.call(this);new orangesearch.completion.plugin.Plugin().extendFromPlugin(orangesearch.completion.plugin.PetaleMobile);this.boldSuggestion=true;this.clearAccents=false;this.clearSeparatorChars=false;this._ready=false;this.titleHeight=40;this.statPetaleFunctionCallback=false;this.displayStatDelay=2000;this._lastDisplayStatTimers={};this._petaleThematics={people:"mpeople",marque:"mmarque",meteo:"mmeteo"};this.sections={};this.callbacks={};return this};PetaleMobile.prototype={getTypeOfSuggestion:function(){return"petale"},isValidType:function(a){return(a==this.getTypeOfSuggestion())},populateNewSuggestionRow:function(e,b,c,a){var d=this._createSuggestionElement(c.v,c.d,b);if(c.css&&wink.isString(c.css)){orangesearch.tools.addClass(b,c.css)}orangesearch.tools.addClass(b,"petalemobile");this.completionComponent.addSuggestionParam(b.id,"v",c.v);this.completionComponent.addSuggestionParam(b.id,"t",c.t);this.completionComponent.addSuggestionParam(b.id,"d",c.d);b.appendChild(d)},_createSuggestionElement:function(h,g,c){var b=document.createElement("div");b.appendChild(document.createTextNode(h));if(this.boldSuggestion){b=orangesearch.tools.getBoldInvNode(b,this.completionComponent._currentFieldValue,this.clearAccents,this.clearSeparatorChars)}var a=document.createElement("div");var d,f;var e=this._petaleThematics.people;if(g.them){e=g.them.toLowerCase()}switch(e){case this._petaleThematics.meteo:var f={type:"meteo",title:h,infoIndexToAdd:[1],suggestionNode:c,openedSection:true};d=this._createPetaleBasic(g,f);a.appendChild(d);a=this._createAccordion(a,b,f);break;case this._petaleThematics.marque:var f={type:"marque",title:h,suggestionNode:c,openedSection:true};d=this._createPetaleBasic(g,f);a.appendChild(d);a=this._createAccordion(a,b,f);break;case this._petaleThematics.people:default:var f={type:"people",title:h,suggestionNode:c,disableMultipleSections:true};d=this._createPetaleWithAction(g,f);a.appendChild(d);a=this._createAccordion(a,b,f);break}return a},_createAccordion:function(e,c,d){var g=this;wink.addClass(d.suggestionNode,d.type);var f=new wink.ui.layout.Accordion({autoScroll:false,chevronRotation:180,titleHeight:this.titleHeight});var k=f.addSection(d.title,e);var j=f.getSections()[0];this.sections[k]=j;var b=f.getDomNode();j.titleNode.innerHTML="";j.titleNode.appendChild(c);if(!d.hideChevron){j.titleNode.appendChild(j.chevronNode)}orangesearch.tools.addClass(j.contentNode,"content");var h=j.titleNode.onclick;orangesearch.tools.addEventListener(j.chevronNode,"mousedown",(function(n,m,l){return function(o){o.stopPropagation();wink.addClass(m.suggestionNode,"opening");wink.fx.onTransitionEnd(j.contentNode,function(){wink.removeClass(m.suggestionNode,"opening")});if(!j.opened){n.displayStat(m.type,m.title)}l(o)}})(g,d,h));j.titleNode.onclick=null;orangesearch.tools.addEventListener(j.titleNode,"mousedown",wink.bind(function(l){this.manageDivOnMouseDown(this,l,b.parentNode)},this.completionComponent));if(d.disableMultipleSections){wink.subscribe("/section/events/selectsection",{context:this,method:"toggleOtherAccordions",arguments:f.uId})}if(d.openedSection){var a=setTimeout((function(n,l,m){return function(){n.displayStat(l,m)}})(g,d.type,d.title),this.displayStatDelay);this._lastDisplayStatTimers[a]=true;setTimeout(function(){wink.addClass(d.suggestionNode,"first_open");f.selectSection(k)},1);setTimeout(function(){wink.removeClass(d.suggestionNode,"first_open")},500)}orangesearch.tools.addEventListener(window,("onorientationchange" in window)?"orientationchange":"resize",wink.bind(f.refreshContentHeight,f));return b},toggleOtherAccordions:function(d,b){if(d.accordionId!=b){return}var a=this.sections[d.sectionId];if(!a){return}for(var c in this.sections){if(c!=d.sectionId){this.sections[c].hide();this.sections[c]._accordion._visibleContent=0;this.sections[c]._accordion._updateHeight()}}},_createPetaleWithAction:function(c,b){var a=document.createDocumentFragment();if(c.ref.info){a.appendChild(this._createInfos(c,b))}a.appendChild(this._createLinks(c,b));return a},_createPetaleBasic:function(k,d){if(typeof d=="undefined"){d={}}var n=document.createElement("div");orangesearch.tools.addClass(n,"info link");var b=this._createLinkContainerElement(k);b.appendChild(this._createImageElement(k.ref.image));var g,l,m;var h=false;g=document.createElement("span");g.innerHTML=d.title;b.appendChild(g);if(k.ref.info){var a=document.createElement("div");orangesearch.tools.addClass(a,"url");for(var f=0;f<k.ref.info.length;f++){if(d.infoIndexToAdd&&d.infoIndexToAdd.indexOf(f)<0){continue}m=k.ref.info[f];var c=m.indexOf("[[gambling]]");if(c!==-1){h=true;m=m.slice(0,c)+m.slice(c+12)}l=document.createElement("span");l.innerHTML=m;a.appendChild(l)}b.appendChild(a);if(h){var e=document.createElement("div");orangesearch.tools.addClass(e,"gambling");e.innerHTML="Jouer comporte des risques : endettement, dépendance, isolement. Appelez le 09&nbsp;74&nbsp;75&nbsp;13&nbsp;13 (appel non surtaxé).";orangesearch.tools.addEventListener(e,"mousedown",function(o){o.preventDefault();o.stopPropagation();window.open("http://www.joueurs-info-service.fr")});b.appendChild(e)}n.appendChild(b);var j={domNode:n,url:k.ref.url,callback:k.ref.callback,type:d.type,title:d.title};orangesearch.tools.addEventListener(n,"mousedown",wink.bind(function(o){this._onLinkElementClick(o,j);o.stopPropagation()},this))}return n},_createLinks:function(j,e){var c=document.createDocumentFragment();var d,k,a;var f=wink.isSet(j.links)?j.links.length:0;for(var g=0;g<f;g++){if(!j.links[g]||!j.links[g]["act"]||!j.links[g]["type"]){continue}var b=j.links[g]["urlDisplay"].replace(/^https?:\/\//,"");a={url:j.links[g]["url"],type:e.type,title:e.title,label:"<span>"+j.links[g]["act"]+' : </span><span class="url">'+b+"</span>"};d=this._createSingleLinkElement(a);c.appendChild(d)}var h=this.completionComponent;a={callback:function(l){h.manageDivOnMouseDown(h,l,e.suggestionNode)},label:"<span>Tous les résultats "+e.title+"</span>",type:e.type,title:e.title};k=this._createSingleLinkElement(a);c.appendChild(k);return c},_onLinkElementClick:function(a,b){a.stopPropagation();if(b.callback){this.clickStat(b.type,b.title);wink.call(b.callback,a)}if(b.url){this.clickStat(b.type,b.title,b.url)}return true},_createSingleLinkElement:function(d){var a=document.createElement("div");orangesearch.tools.addClass(a,"link");var c={domNode:a,url:d.url,callback:d.callback,type:d.type,title:d.title};if(typeof c.url!="undefined"){var b=this._createLinkContainerElement(c);b.innerHTML=d.label;a.appendChild(b)}else{a.innerHTML=d.label}orangesearch.tools.addEventListener(a,"mousedown",wink.bind(function(f){this._onLinkElementClick(f,c);f.stopPropagation()},this));return a},_createInfos:function(e,d){var c=document.createElement("div");var b={url:e.ref.url,callback:e.ref.callback,domNode:c,type:d.type,title:d.title};orangesearch.tools.addClass(c,"info link");var a=this._createLinkContainerElement(b);a.appendChild(this._createImageElement(e.ref.image));a.appendChild(this._createTextInfosElement(e,d.type));c.appendChild(a);orangesearch.tools.addEventListener(c,"mousedown",wink.bind(function(f){this._onLinkElementClick(f,b);f.preventDefault();f.stopPropagation()},this));return c},_createLinkContainerElement:function(a){var b=document.createElement("a");if(typeof a.url!=="undefined"){b.setAttribute("href",a.url)}else{if(typeof a.ref.url!=="undefined"){b.setAttribute("href",a.ref.url)}}if(this.completionComponent.isTargetBlank){b.setAttribute("target","_blank")}orangesearch.tools.addClass(b,"linkContainer");return b},_createImageElement:function(a){var b=document.createElement("img");orangesearch.tools.addClass(b,"icon");if(typeof a=="string"&&a.length>0){b.src=a}else{orangesearch.tools.addClass(b,"error")}return b},_createTextInfosElement:function(f,d){var e=document.createDocumentFragment();if(f.ref.info.length==0){return e}var a,c,b;a=document.createElement("span");a.innerHTML=f.ref.info[0];e.appendChild(a);b=this._createUrlElement(f);orangesearch.tools.addClass(b,"url");e.appendChild(b);return e},_createUrlElement:function(b){var a=document.createElement("span");a.innerHTML=b.ref.urlDisplay;orangesearch.tools.addClass(a,"url");return a},CLICK_STAT_ACTION:"click",DISPLAY_STAT_ACTION:"display",_stat:function(c,a,b,d){if(c!=this.CLICK_STAT_ACTION&&c!=this.DISPLAY_STAT_ACTION){return false}if(this.statPetaleFunctionCallback){return this.statPetaleFunctionCallback(c,a,b,d)}},displayStat:function(a,b){return this._stat(this.DISPLAY_STAT_ACTION,a,b)},clickStat:function(a,c,b){return this._stat(this.CLICK_STAT_ACTION,a,c,b)},resetGtatDisplayStatsTimer:function(){for(var a in this._lastDisplayStatTimers){clearTimeout(a)}this._lastDisplayStatTimers={}},initProperties:function(){if(this.completionComponent._properties.statPetaleFunctionCallback){this.statPetaleFunctionCallback=this.completionComponent._properties.statPetaleFunctionCallback}if(this.completionComponent._properties.petaleMobileTitleHeight){this.titleHeight=this.completionComponent._properties.petaleMobileTitleHeight}},initPlugin:function(){},removePlugin:function(){},initSubscription:function(){wink.subscribe("/callback/displayCompletionResults/beforeDisplay",{context:this,method:"resetGtatDisplayStatsTimer"})},removeSubscription:function(){wink.unsubscribe("/callback/displayCompletionResults/beforeDisplay",{context:this,method:"resetGtatDisplayStatsTimer"})}};orangesearch.completion.plugin.PetaleMobile=PetaleMobile;var TopTrend=function(){orangesearch.completion.plugin.Plugin.call(this);new orangesearch.completion.plugin.Plugin().extendFromPlugin(orangesearch.completion.plugin.TopTrend);this.topTrendTitle="Top Requ&ecirc;te";this.topTrendMaxNbChar=false;return this};TopTrend.prototype={getTypeOfSuggestion:function(){return"top"},isValidType:function(a){return(a==this.getTypeOfSuggestion())},initProperties:function(){if(!wink.isUndefined(this.completionComponent._properties.topTrendTitle)){this.topTrendTitle=this.completionComponent._properties.topTrendTitle}if(!wink.isUndefined(this.completionComponent._properties.topTrendMaxNbChar)){this.topTrendMaxNbChar=this.completionComponent._properties.topTrendMaxNbChar}else{this.topTrendMaxNbChar=this.completionComponent.maxNbChar}},populateNewSuggestionRow:function(j,c,e,f){if(f>1){var g=document.createElement("div");orangesearch.tools.addClass(g,"header");c.appendChild(g)}var h=document.createElement("div");orangesearch.tools.addClass(h,"container");var a=document.createElement("span");orangesearch.tools.addClass(a,"number");a.innerHTML=f;var d=document.createElement("span");orangesearch.tools.addClass(d,"text");var b=e.d["request"];if(this.topTrendMaxNbChar>0){b=b.cutString(this.topTrendMaxNbChar)}d.innerHTML=b;h.appendChild(a);h.appendChild(d);c.appendChild(h);this.completionComponent.addSuggestionParam(c.id,"v",e.v);this.completionComponent.addSuggestionParam(c.id,"t",e.t);this.completionComponent.addSuggestionParam(c.id,"d",e.d)},populateNewBlockLabel:function(d,e,c){orangesearch.tools.addClass(d,"toptrend");if(c=="Bottom"){this.completionComponent.populateNewBlockLabel(d,e,c);return}var b=document.createElement("span");orangesearch.tools.addClass(b,"text");if(this.completionComponent.currentBlocks[e]["label"]){b.innerHTML=this.completionComponent.currentBlocks[e]["label"]}else{b.innerHTML=this.topTrendTitle}var a=document.createElement("span");var f=document.createElement("span");var g=document.createTextNode(orangesearch.tools.fullDate(true));f.innerHTML=orangesearch.tools.getNowDay()+" ";orangesearch.tools.addClass(a,"date");orangesearch.tools.addClass(f,"day");a.appendChild(f);a.appendChild(g);d.appendChild(b);d.appendChild(a)}};orangesearch.completion.plugin.TopTrend=TopTrend;